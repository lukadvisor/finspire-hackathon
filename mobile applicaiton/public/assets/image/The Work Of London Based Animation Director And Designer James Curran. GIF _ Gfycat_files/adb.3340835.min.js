/*  AdBridg Connect v2.1.0, copyright AdBridg Inc. All rights reserved. 892b034:k4a7rwu0 */
!function r(a,o,s){function d(i,e){if(!o[i]){if(!a[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(c)return c(i,!0);throw new Error("Cannot find module '"+i+"'")}var n=o[i]={exports:{}};a[i][0].call(n.exports,function(e){var t=a[i][1][e];return d(t||e)},n,n.exports,r,a,o,s)}return o[i].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)d(s[e]);return d}({1:[function(n,e,t){var r={},i={aliasRegistry:{},bidderRegistry:r,getBidAdapter:function(e){return r[e]},registerBidAdapter:function(e,t){var i=n("./shim.js").polyfills.utils;e&&t?"function"==typeof e.callBids?r[t]=e:i.logError("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):i.logError("bidAdaptor or bidderCode not specified")}};e.exports=i},{"./shim.js":20}],2:[function(e,t,i){var l=e("../utils.js"),g=e("../ajax.js");t.exports=function(s,e,t,r){function a(){return r&&r.consentString&&r.gdprApplies}var d={TAG:"iframe",TYPE:"iframe"},c={TAG:"img",TYPE:"image"},i={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},n=function(e){return"//"+(e.aol_server?e.aol_server:i[e.aol_region||"us"])+"/pubapi/3.0/"+e.network+"/"+e.bidder_unit_id+"/"+(e.pageid||0)+"/"+(e.sizeid||0)+"/ADTECH;v=2;cmd=bid;cors=yes;alias="+l.genUUID()+";misc="+(new Date).getTime()+(e.send_floor?";bidfloor="+e.min_cpm:"")+(a()?";euconsent="+r.consentString+";gdpr=1":"")},u=function(e){var t,i=e.aol_server?e.aol_server:"hb.nexage.com",n="";return l.https&&(n+="&secure=1"),a()&&(n+="&euconsent="+r.consentString+"&gdpr=1"),"//"+i+"/bidRequest?"+("dcn="+(t={dcn:e.dcn,pos:e.bidder_unit_id,dynamicParams:n}).dcn+"&pos="+t.pos+"&cmd=bid"+t.dynamicParams)};this.execute=function(i){i.eachBidRequest(s,function(a,o){var e,t={url:((e=o).api||(e.api="aol"),"onemobile"==e.api?u(e):n(e)),withCredentials:!0,max_ms:i.ajax_ms};g(t,function(e,t){if(e)return a.addEmptyBid(o),"timeout"!=e.type&&l.err("AOL call failed: ",e);if(!t)return a.addEmptyBid(o);try{t=JSON.parse(t)}catch(e){return a.addEmptyBid(o),l.err("AOL invalid JSON: ",e)}if(t.ext&&t.ext.pixels){var i=function(e){var n=/\w*(?=\s)/,r=/src=("|')(.*?)\1/,a=[];if(e){var t=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);t&&t.forEach(function(e){var t=e.match(n)[0],i=e.match(r)[2];t&&t&&a.push({type:t===c.TAG?c.TYPE:d.TYPE,url:i})})}return a}(t.ext.pixels);l.each(i,function(e){e.type==c.TYPE?l.uspi(s,e.url):l.uspf(s,e.url)})}try{var n=t.seatbid[0].bid[0]}catch(e){return void a.addEmptyBid(o)}var r=n.adm;a.addBid(o,{creative:r,cpm:n.price,width:n.w,height:n.h,extras:{id:t.id,creativeid:n.crid}})})})}}},{"../ajax.js":9,"../utils.js":22}],3:[function(e,t,i){var o=e("../utils.js"),s=e("../ajax.js"),d=(e("../config.js").afterConsent,!1),c=function(e){if("string"==typeof e){var t=e.split("x");return{width:parseInt(t[0],10),height:parseInt(t[1],10)}}for(var i=[],n=0;n<e.length;++n)i.push(c(e[n]));return i};t.exports=function(n,e,t,r){this.execute=function(i){var a=[];if(i.eachBidRequest(n,function(e,t){var i,n,r={sizes:c(t.all_sizes),primary_size:c(t.size),ad_types:["banner"],uuid:t.id,id:parseInt(t.bidder_unit_id,10),allow_smaller_sizes:!1,use_pmt_rule:!1,prebid:!0,disable_psa:!0,keywords:(i=(t.params||{}).keywords||{},n=[],o.each(i,function(e,t){var i={key:t};Array.isArray(e)&&(i.value=e.map(function(e){return e+""})),null!=e&&(i.value=[e+""]),i.hasOwnProperty("value")&&n.push(i)}),n)};t.send_floor&&(r.reserve=t.min_cpm),t.position&&(r.position={above:1,below:2}[t.position]||0),a.push(r)}),!a.length)return o.log(n,"had no valid units for auction "+i.id),i.markBidderEmpty(n);var e={tags:a,user:void 0,sdk:{source:"pbjs",version:"1.12.0"}};r&&(e.gdpr_consent={consent_string:r.consentString,consent_required:r.gdprApplies});var t={url:"//ib.adnxs.com/ut/v3/prebid",method:"POST",withCredentials:!0,data:JSON.stringify(e),max_ms:i.ajax_ms};s(t,o.wrapAsync(function(e,t){if(e)return i.markBidderEmpty(n),"timeout"!=e.type&&o.err("AppNexusAST had error: ",e);if(t)try{t=JSON.parse(t)}catch(e){o.err("AppNexusAST JSON fail"),t=!1}if(!t)return i.markBidderEmpty(n);o.each(t.tags,o.wrapAsync(function(n){var r=i.getBidRequest(n.uuid);if(!r)return o.err("AppNexusAst bad id: ",n.uuid);n.ads&&n.ads.length&&o.each(n.ads,function(e){if(e.cpm&&e.rtb&&e.rtb.banner){var t=e.rtb.banner.content;try{var i=e.rtb.trackers[0].impression_urls[0];t+=o.pixelh(i)}catch(e){o.err("AppNexusAst tk failed: ",e)}r.unit.addBid(r,{creative:t,cpm:e.cpm,width:e.rtb.banner.width,height:e.rtb.banner.height,extras:{bmid:e.buyer_member_id,crid:e.creative_id,bauid:n.auction_id,bapid:n.ad_profile_id}})}})})),d||(d=!0,o.uspf(n,"//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html")),i.markBidderEmpty(n)}))}}},{"../ajax.js":9,"../config.js":13,"../utils.js":22}],4:[function(e,t,i){"use strict";var n=e("../shim.js").polyfills,u=n.utils,a=(n.registerBidder,0),o="consumable",r={code:"consumable",isBidRequestValid:function(e){return!!(e.params.networkId&&e.params.siteId&&e.params.unitId&&e.params.unitName)},buildRequests:function(e){var t={method:"POST",url:"",data:"",bidRequest:[]};if(e.length<1)return t;a=e[0].params.siteId,o=e[0].bidder;var r=u.assign({placements:[],time:Date.now(),user:{},url:u.getTopWindowUrl(),referrer:document.referrer,enableBotFiltering:!0,includePricingData:!0,parallel:!0},e[0].params);return e.map(function(e){var t,i,n=u.assign({divName:e.bidId,adTypes:e.adTypes||(t=e.sizes,i=[],t.forEach(function(e){var t=s.indexOf(e[0]+"x"+e[1]);0<=t&&i.push(t)}),i)},e.params);n.networkId&&n.siteId&&n.unitId&&n.unitName&&r.placements.push(n)}),t.data=JSON.stringify(r),t.bidRequest=e,t.url="https://e.serverbid.com/api/v2",t},interpretResponse:function(e,t){var i,n=void 0,r=void 0,a=void 0,o=[];i=t.bidRequest,e=(e||{}).body;for(var s=0;s<i.length;s++)if(n={},r=(a=i[s]).bidId,e){var d=e.decisions&&e.decisions[r],c=d&&d.pricing&&d.pricing.clearPrice;d&&c&&(n.requestId=r,n.cpm=c,n.width=d.width,n.height=d.height,n.unitId=a.params.unitId,n.unitName=a.params.unitName,n.ad=l(d,n.unitId,n.unitName),n.currency="USD",n.creativeId=d.adId,n.ttl=30,n.netRevenue=!0,n.referrer=u.getTopWindowUrl(),o.push(n))}return o},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"//sync.serverbid.com/ss/"+a+".html"}];u.logWarn(o+": Please enable iframe based user syncing.")}},s=[null,"120x90","120x90","468x60","728x90","300x250","160x600","120x600","300x100","180x150","336x280","240x400","234x60","88x31","120x60","120x240","125x125","220x250","250x250","250x90","0x0","200x90","300x50","320x50","320x480","185x185","620x45","300x125","800x250"];function l(e,t,i){var n="<script type='text/javascript'>document.write('<div id=\""+i+"-"+t+"\">');<\/script>"+(e.contents&&e.contents[0]&&e.contents[0].body+u.createTrackPixelHtml(e.impressionUrl));return n+="<script type='text/javascript'>document.write('</div>');<\/script>",n+="<script type='text/javascript'>document.write('<div class=\""+i+"\"></div>');<\/script>",n+="<script type='text/javascript'>document.write('<scr'+'ipt type=\"text/javascript\" src=\"https://yummy.consumable.com/"+t+"/"+i+"/widget/unit.js?cb="+Math.round((new Date).getTime())+"\" charset=\"utf-8\" async></scr'+'ipt>');<\/script>"}s[77]="970x90",s[123]="970x250",s[43]="300x600",s[286]="970x66",s[3230]="970x280",s[429]="486x60",s[374]="700x500",s[934]="300x1050",s[1578]="320x100",s[331]="320x250",s[3301]="320x267",s[2730]="728x250",t.exports=e("../shim.js").wrap({spec:r,unitIDKey:"unitId"})},{"../shim.js":20}],5:[function(e,t,i){"use strict";var n=e("../shim.js").polyfills,g=n.utils,a=(n.registerBidder,n.BANNER),o=n.VIDEO,r=n.Renderer,s=n.includes,d="emx_digital",c="//js.brealtime.com/outstream/1.30.0/bundle.js",f={validateSizes:function(e){return g.isArray(e)&&void 0!==e[0]?e.every(function(e){return g.isArray(e)&&2===e.length}):(g.logWarn(d+": Sizes should be an array"),!1)},checkVideoContext:function(e){return e&&e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context&&("instream"===e.mediaTypes.video.context||"outstream"===e.mediaTypes.video.context)},buildBanner:function(e){var t=[];return t=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes?e.mediaTypes.banner.sizes:e.sizes,f.validateSizes(t)||(g.logWarn(d+": could not detect mediaType banner sizes. Assigning to bid sizes instead"),t=e.sizes),{format:t.map(function(e){return{w:e[0],h:e[1]}}),w:t[0][0],h:t[0][1]}},formatVideoResponse:function(e,t){return e.vastXml=t.adm,t.renderer||t.mediaTypes&&t.mediaTypes.video&&t.mediaTypes.video.context&&"outstream"!==t.mediaTypes.video.context||(e.renderer=f.createRenderer(e,{id:t.bidId,url:c})),e},isMobile:function(){return/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)},isConnectedTV:function(){return/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)},getDevice:function(){return{ua:navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,devicetype:f.isMobile()?1:f.isConnectedTV()?3:2,language:navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage}},cleanProtocols:function(e){return e.protocols&&s(e.protocols,7)&&(g.logWarn(d+": VAST 4.0 is currently not supported. This protocol has been filtered out of the request."),e.protocols=e.protocols.filter(function(e){return 7!==e})),e},outstreamRender:function(t){t.renderer.push(function(){var e=t&&t.params&&t.params[0]&&t.params[0].video?t.params[0].video:{};window.emxVideoQueue=window.emxVideoQueue||[],window.queueEmxVideo({id:t.adUnitCode,adsResponses:t.vastXml,options:e}),window.emxVideoReady&&window.videojs&&window.emxVideoReady()})},createRenderer:function(e,t){var i=r.install({id:t.id,url:c,loaded:!1});try{i.setRender(f.outstreamRender)}catch(e){g.logWarn("Prebid Error calling setRender on renderer",e)}return i},buildVideo:function(e){var t=g.assign(e.mediaTypes.video,e.params.video);return f.cleanProtocols(t)},parseResponse:function(e){try{return decodeURIComponent(e)}catch(e){g.logError("emx_digitalBidAdapter","error",e)}},getReferrer:function(){try{return window.top.document.referrer}catch(e){return document.referrer}},getGdpr:function(e,t){return e.gdprConsent&&(t.regs={ext:{gdpr:!0===e.gdprConsent.gdprApplies?1:0}}),e.gdprConsent&&e.gdprConsent.gdprApplies&&(t.user={ext:{consent:e.gdprConsent.consentString}}),t}},u={code:d,supportedMediaTypes:[a,o],isBidRequestValid:function(e){if(!e||!e.params)return g.logWarn(d+": Missing bid or bid params."),!1;if(e.bidder!==d)return g.logWarn(d+': Must use "emx_digital" as bidder code.'),!1;if(!e.params.tagid||!g.isStr(e.params.tagid))return g.logWarn(d+": Missing tagid param or tagid present and not type String."),!1;if(e.mediaTypes&&e.mediaTypes.banner){var t=void 0;if(t=e.mediaTypes.banner.sizes?e.mediaTypes.banner.sizes:e.sizes,!f.validateSizes(t))return g.logWarn(d+": Missing sizes in bid"),!1}else if(e.mediaTypes&&e.mediaTypes.video){if(!f.checkVideoContext(e))return g.logWarn(d+": Missing video context: instream or outstream"),!1;if(!e.mediaTypes.video.playerSize)return g.logWarn(d+": Missing video playerSize"),!1}return!0},buildRequests:function(e,t){var d=[],i=t.timeout||"",n=Date.now(),r=location.protocol+"//hb.emxdgt.com?t="+i+"&ts="+n+"&src=pbjs",c=-1<location.protocol.indexOf("https")?1:0,a=g.getTopWindowLocation().hostname,o=t.refererInfo.referer,s=f.getDevice(),u=f.getReferrer();g._each(e,function(e){var t=g.getBidIdParameter("tagid",e.params),i=parseFloat(g.getBidIdParameter("bidfloor",e.params))||0,n=!!e.mediaTypes.video,r={id:e.bidId,tid:e.transactionId,tagid:t,secure:c},a=n?{video:f.buildVideo(e)}:{banner:f.buildBanner(e)},o=0<i?{bidfloor:i,bidfloorcur:"USD"}:{},s=g.assign(r,a,o);d.push(s)});var l={id:t.auctionId,imp:d,device:s,site:{domain:a,page:o,ref:u},cur:"USD",version:"1.40.2"};return l=f.getGdpr(t,g.assign({},l)),{method:"POST",url:r,data:JSON.stringify(l),options:{withCredentials:!0}}},interpretResponse:function(e){var r=[],t=e.body||{};return t.seatbid&&0<t.seatbid.length&&t.seatbid[0].bid&&t.seatbid.forEach(function(e){e=e.bid[0];var t=!1,i=f.parseResponse(e.adm)||"",n={requestId:e.id,cpm:e.price,width:e.w,height:e.h,creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,ttl:e.ttl,ad:i};e.adm&&-1<e.adm.indexOf("<?xml version=")&&(t=!0,n=f.formatVideoResponse(n,g.assign({},e))),n.mediaType=t?o:a,r.push(n)}),r},getUserSyncs:function(e){var t=[];return e.iframeEnabled&&t.push({type:"iframe",url:"//biddr.brealtime.com/check.html"}),t}};t.exports=e("../shim.js").wrap({spec:u,unitIDKey:"tagid"})},{"../shim.js":20}],6:[function(e,t,i){var p=e("../utils.js"),o=e("../ajax.js");t.exports=function(a,e,t){var f=function(e){return"video"===e};this.execute=function(t){var d=[],c=[],u=[],l={},g=!1;t.eachBidRequest(a,function(e,o){var s=o.format;p.each(o.all_sizes,function(e){if(t=e,("fullwidth"!==(i=s)||"300x250"!==t)&&"video"!=(r=i)&&"native"!=r&&"300x250"!=(n=t)&&"320x50"!=n)return p.err("FAN invalid size/format",e,s);var t,i,n,r,a=o.bidder_unit_id;if(l.hasOwnProperty(a))return p.err("FAN duplicate placement",a);d.push(a),c.push(o.format||e),u.push(f(s)?"":"5.5.web"),l[a]=o,f(s)&&(g=e.split("x"))})});var e=!1;try{e=!!String(window.location.search).match("anhb_testmode")}catch(e){}var i=encodeURIComponent(p.url().href),n={placementids:d,adformats:c,testmode:e,pageurl:i,sdk:u,pbv:"1.12.0"};g&&(n.playerwidth=parseInt(g[0],10),n.playerheight=parseInt(g[1],10)),p.safari&&(n.cb=p.genUUID());var r={url:"https://an.facebook.com/v2/placementbid.json?"+p.toqs(n),withCredentials:!0,max_ms:t.ajax_ms};o(r,function(e,d){if(e)return t.markBidderEmpty(a),"timeout"!=e.type&&p.err("FAN had error: ",e);if(d)try{d=JSON.parse(d)}catch(e){p.err("FAN JSON fail"),d=!1}if(!d)return t.markBidderEmpty(a);p.each(d.bids||[],function(e,s){p.each(e,function(e){var t=l[s];if(!t)return p.err("FAN bad id",s);var i=e.bid_id,n=e.bid_price_cents;if(n){var r,a,o=t.size.split("x");t.unit.addBid(t,{creative:(r=s,"<html><head>"+("native"===(a=t.format||"")?'<script>window.onload=function(){if(parent){var o=document.getElementsByTagName("head")[0];var s=parent.document.getElementsByTagName("style");for(var i=0;i<s.length;i++)o.appendChild(s[i].cloneNode(true));}}<\/script>':"")+"</head><body><div style=\"display:none;position:relative;\"><script type='text/javascript'>var data = {placementid:'"+r+"',format:'"+a+"',bidid:'"+i+"',onAdLoaded:function(e){console.log('Audience Network ["+r+"] ad loaded');e.style.display = 'block';},onAdError:function(c,m){console.log('Audience Network ["+r+"] error (' + c + ') ' + m);}};(function(a,b,c){var d='https://www.facebook.com',e='https://connect.facebook.net/en_US/fbadnw55.js',f={iframeLoaded:true,xhrLoaded:true},g=a.data,h=function(){if(Date.now){return Date.now();}else return +new Date();},i=function(aa){var ba=d+'/audience_network/client_event',ca={cb:h(),event_name:'ADNW_ADERROR',ad_pivot_type:'audience_network_mobile_web',sdk_version:'5.5.web',app_id:g.placementid.split('_')[0],publisher_id:g.placementid.split('_')[1],error_message:aa},da=[];for(var ea in ca)da.push(encodeURIComponent(ea)+'='+encodeURIComponent(ca[ea]));var fa=ba+'?'+da.join('&'),ga=new XMLHttpRequest();ga.open('GET',fa,true);ga.send();if(g.onAdError)g.onAdError('1000','Internal error.');},j=function(){if(b.currentScript){return b.currentScript;}else{var aa=b.getElementsByTagName('script');return aa[aa.length-1];}},k=function(aa){try{return aa.document.referrer;}catch(ba){}return '';},l=function(){var aa=a,ba=[aa];try{while(aa!==aa.parent&&aa.parent.document)ba.push(aa=aa.parent);}catch(ca){}return ba.reverse();},m=function(){var aa=l();for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=ca.ADNW||{};ca.ADNW=da;if(!ca.ADNW)continue;return da.v55=da.v55||{ads:[],window:ca};}throw new Error('no_writable_global');},n=function(aa){var ba=aa.indexOf('/',aa.indexOf('://')+3);if(ba===-1)return aa;return aa.substring(0,ba);},o=function(aa){return aa.location.href||k(aa);},p=function(aa){if(aa.sdkLoaded)return;var ba=aa.window.document,ca=ba.createElement('iframe');ca.name='fbadnw';ca.style.display='none';ba.body.appendChild(ca);var da=ca.contentDocument.createElement('script');da.src=e;da.async=true;ca.contentDocument.body.appendChild(da);aa.sdkLoaded=true;},q=function(aa){var ba=/^https?:\\/\\/www\\.google(\\.com?)?\\.\\w{2,3}$/;return !!aa.match(ba);},r=function(aa){return !!aa.match(/cdn\\.ampproject\\.org$/);},s=function(){var aa=c.ancestorOrigins||[],ba=aa[aa.length-1]||c.origin,ca=aa[aa.length-2]||c.origin;if(q(ba)&&r(ca)){return n(ca);}else return n(ba);},t=function(aa){try{return JSON.parse(aa);}catch(ba){i(ba.message);throw ba;}},u=function(aa,ba,ca){if(!aa.iframe){var da=ca.createElement('iframe');da.src=d+'/audiencenetwork/iframe/';da.style.display='none';ca.body.appendChild(da);aa.iframe=da;aa.iframeAppendedTime=h();aa.iframeData={};}ba.iframe=aa.iframe;ba.iframeData=aa.iframeData;ba.tagJsIframeAppendedTime=aa.iframeAppendedTime||0;},v=function(aa){var ba=d+'/audiencenetwork/xhr/?sdk=5.5.web';for(var ca in aa)if(typeof aa[ca]!=='function')ba+='&'+ca+'='+encodeURIComponent(aa[ca]);var da=new XMLHttpRequest();da.open('GET',ba,true);da.withCredentials=true;da.onreadystatechange=function(){if(da.readyState===4){var ea=t(da.response);aa.events.push({name:'xhrLoaded',source:aa.iframe.contentWindow,data:ea,postMessageTimestamp:h(),receivedTimestamp:h()});}};da.send();},w=function(aa,ba){var ca=d+'/audiencenetwork/xhriframe/?sdk=5.5.web';for(var da in ba)if(typeof ba[da]!=='function')ca+='&'+da+'='+encodeURIComponent(ba[da]);var ea=b.createElement('iframe');ea.src=ca;ea.style.display='none';b.body.appendChild(ea);ba.iframe=ea;ba.iframeData={};ba.tagJsIframeAppendedTime=h();},x=function(aa){var ba=function(event){try{var da=event.data;if(da.name in f)aa.events.push({name:da.name,source:event.source,data:da.data});}catch(ea){}},ca=aa.iframe.contentWindow.parent;ca.addEventListener('message',ba,false);},y=function(aa){if(aa.context&&aa.context.sourceUrl)return true;try{return !!JSON.parse(decodeURI(aa.name)).ampcontextVersion;}catch(ba){return false;}},z=function(aa){var ba=h(),ca=l()[0],da=j().parentElement,ea=ca!=a.top,fa=ca.$sf&&ca.$sf.ext,ga=o(ca),ha=m();p(ha);var ia={amp:y(ca),events:[],tagJsInitTime:ba,rootElement:da,iframe:null,tagJsIframeAppendedTime:ha.iframeAppendedTime||0,url:ga,domain:s(),channel:n(o(ca)),width:screen.width,height:screen.height,pixelratio:a.devicePixelRatio,placementindex:ha.ads.length,crossdomain:ea,safeframe:!!fa,placementid:g.placementid,format:g.format||'300x250',testmode:!!g.testmode,onAdLoaded:g.onAdLoaded,onAdError:g.onAdError};if(g.bidid)ia.bidid=g.bidid;if(ea){w(ha,ia);}else{u(ha,ia,ca.document);v(ia);}; x(ia);ia.rootElement.dataset.placementid=ia.placementid;ha.ads.push(ia);};try{z();}catch(aa){i(aa.message||aa);throw aa;}})(window,document,location);<\/script>"+("native"===a?'<div class="thirdPartyRoot"><a class="fbAdLink"><div class="fbAdMedia thirdPartyMediaClass"></div><div class="fbAdSubtitle thirdPartySubtitleClass"></div><div class="fbDefaultNativeAdWrapper"><div class="fbAdCallToAction thirdPartyCallToActionClass"></div><div class="fbAdTitle thirdPartyTitleClass"></div></div></a></div>':"")+"</div></body></html>"),cpm:n/100,width:parseInt(o[0],10),height:parseInt(o[1],10),extras:{fbid:i,cur:d.currency}})}})}),d.errors&&d.errors.length&&p.err("FAN API errors",d.errors),t.markBidderEmpty(a)})}}},{"../ajax.js":9,"../utils.js":22}],7:[function(e,t,i){var u=e("../utils.js"),l=e("../ajax.js"),g=!1;t.exports=function(s,e,d,c){this.execute=function(n){var r=d.pubid,a=u.url(),o=[];if(n.eachBidRequest(s,function(e,t){var i=t.size.split("x");o.push({id:t.id,tagid:t.bidder_unit_id,secure:"https:"===window.location.protocol?1:0,bidfloor:t.min_cpm,banner:{pos:0,w:parseInt(i[0],10),h:parseInt(i[1],10),topframe:a.is_top?1:0},ext:{pmZoneId:void 0}}),t.pubid&&(r=""+t.pubid)}),!r)return u.log("Pubmatic pubid missing"),n.markBidderEmpty(s);if(!o.length)return u.log("Pubmatic had no valid configs"),n.markBidderEmpty(s);var e={id:""+(new Date).getTime(),at:1,cur:["USD"],imp:o,site:{page:a.href,ref:a.referrer,domain:a.domain,publisher:{id:r}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{geo:{}},ext:{wrapper:{wv:"adbridg_2.1.0",transactionId:u.genUUID(),wp:"pbjs"}}};c&&(e.user.ext={consent:c.consentString},e.regs={ext:{consent:c.consentString}});var t={url:"//hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(e),withCredentials:!0,method:"POST",max_ms:n.ajax_ms};if(l(t,function(e,t){if(e)return n.markBidderEmpty(s),"timeout"!=e.type&&u.err("Pubmatic bid request failed: ",e);if(!t)return n.markBidderEmpty(s);try{var i=JSON.parse(t)}catch(e){return n.markBidderEmpty(s),u.err("Pubmatic response unparseable: ",e)}i&&i.seatbid&&i.seatbid[0]&&i.seatbid[0].bid&&u.each(i.seatbid[0].bid,function(e){var t=n.getBidRequest(e.impid);if(!t)return u.err("Pubmatic bad impid",e.impid);var i={crid:e.crid};e.dealid&&(i.dealid=e.dealid),e.ext&&(i.advid=e.ext.advid,i.dspid=e.ext.dspid),e.addomain&&(i.addomain=e.addomain.join?e.addomain.join(","):e.addomain),t.unit.addBid(t,{creative:e.adm,cpm:(parseFloat(e.price)||0).toFixed(2),width:e.w,height:e.h,extras:i})}),n.markBidderEmpty(s)}),!g){g=!0;var i="//ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p="+r;c&&(i+="&gdpr="+(c.gdprApplies?1:0)+"&gdpr_consent="+encodeURIComponent(c.consentString||"")),u.uspf(s,i)}}}},{"../ajax.js":9,"../utils.js":22}],8:[function(e,t,i){var d=e("../utils.js"),c=0;t.exports=function(a,e,o,s){this.execute=function(i){if(o.check_gdpr&&(!s||s.gdprApplies))return i.markBidderEmpty(a),d.log("Sovrn cancelled pending GDPR");var n=[];i.eachBidRequest(a,function(e,t){var i=t.size.split("x");n.push({id:t.id,tagid:t.bidder_unit_id,banner:{w:i[0],h:i[1]}})});var e="sovrnCallback"+ ++c;if(window.AdBridg[e]=d.wrapAsync(function(e){if(!(e&&e.id&&e.seatbid&&e.seatbid[0]&&e.seatbid[0].bid&&e.seatbid[0].bid.length))return i.markBidderEmpty(a);d.each(e.seatbid[0].bid,function(e){var t=i.getBidRequest(e.impid);if(!t)return d.err("Sovrn had bad id: ",e.impid);responseCPM=parseFloat(e.price),responseCPM&&t.unit.addBid(t,{creative:decodeURIComponent(e.adm+'<img src="'+e.nurl+'">'),cpm:responseCPM,width:parseInt(e.w,10),height:parseInt(e.h,10),extras:{}})}),i.markBidderEmpty(a)}),!n.length)return d.log("Sovrn had no valid BRs");var t={id:i.id,imp:n,site:{domain:window.location.host,page:window.location.pathname+location.search+location.hash}},r="//ap.lijit.com/rtb/bid?callback=window.AdBridg."+e+"&src=AdBridgConnect2.0&br="+encodeURIComponent(JSON.stringify(t));d.load(r)}}},{"../utils.js":22}],9:[function(e,t,i){var a=e("./utils.js");t.exports=a.wrapAsync(function(i,n){var r,e=!1,t=i.method||(i.data?"POST":"GET");window.XMLHttpRequest?(r=new window.XMLHttpRequest).onreadystatechange=a.wrapAsync(function(){if(4===r.readyState){var e=r.status;if(200<=e&&e<300||304===e)if(i.parseResponseJson)try{var t=JSON.parse(r.responseText||"null");n(null,t,r)}catch(e){n({err:e,type:"parse"},"",r)}else n(null,r.responseText,r);else n(0===e?{err:"",type:"timeout"}:{err:r.statusText,type:"status="+e},"",r)}}):(e=!0,(r=new window.XDomainRequest).onload=i.parseResponseJson?a.wrapAsync(function(){try{var e=JSON.parse(r.responseText||"null");n(null,e,r)}catch(e){n({err:e,type:"parse"},"",r)}}):a.wrapAsync(function(){n(null,r.responseText,r)}),r.onerror=a.wrapAsync(function(e){n({err:e,type:"error"},"",r)}),r.ontimeout=a.wrapAsync(function(e){n({err:e,type:"timeout"},"",r)}),r.onprogress=function(){}),r.open(t,i.url),0!==i.max_ms&&(r.timeout=i.max_ms||3e3,a.logl("at","Ajax >",i.url,r.timeout)),e||(i.withCredentials&&(r.withCredentials=!0),a.each(i.headers,function(e,t){r.setRequestHeader(t,e)}),i.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",i.contentType||"text/plain")),r.send("POST"===t&&i.data)})},{"./utils.js":22}],10:[function(e,t,s){function i(){for(var e="",t=0;t<10;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e}var d=e("./utils.js"),c=e("./config.js"),n=i(),r="aX0";s.id=[2,r,n].join(","),c.afterConsent(function(e){e&&e.gdprApplies||(r=(r=String((document.cookie.match(/_adb=([^;]+)/)||[""]).pop()))||"a2"+(new Date).getTime().toString(36)+i(),d.cw("_adb",r,365),s.id=[2,r,n].join(","))});function a(e,t,i,n){u[e]||(u[e]=[]),u[e].push(n),o[e]=i,l[e]||(l[e]=setTimeout(function(){g(e)},t))}var u={},o={},l={},g=function(e){if(clearTimeout(l[e]),l[e]=!1,u[e]&&u[e].length){var t=o[e],i=3===e?"1//"+u[e].length+t:"";i+=u[e].join(t),u[e]=[],h(e,1,i)}};s.flushNow=function(){for(var e in u)g(e)};function f(e,t){return v(e)+"`"+v(t)}function p(e){var i=[];return d.each(e,function(e){var t=e.split("x");2==t.length&&i.push(f(t[0],t[1]))}),i.join(".")}function m(e){return String(e).replace(/[^\d\w-]/,"")}var h=function(e,t,i){var n=s.id,r=function(){if(!u[3]||!u[3].length)return"";var e=u[3].join("&e=");return u[3]=[],e}(),a=d.vp(),o="//adspsp.com/pt/"+c.getId()+"/"+e+"/"+t+"/?a="+n+"&b="+i+"&e="+r+"&c="+encodeURIComponent(d.url().href)+"&d="+encodeURIComponent(d.url().referrer)+"&f="+d.pgts().join(".")+"&g="+d.perfts()+"&u=892b034:k4a7rwu0&v="+v(a.w)+"."+v(a.h)+"."+v(a.y);for(o=c.deca(o),d.each(b,function(e,t){d.isarr(e)||(e=[e]),d.each(e,function(e){o+="&"+t+"="+encodeURIComponent(e)})});y.length;)delete b[y.pop()];d.each(_,function(e,t){o+="&"+t+"="+encodeURIComponent(e)}),_={},d.pixel(o)},v=function(e){return(parseInt(e,10)||0).toString(36)},b={};s.meta=d.thread(function(e,t){b[e]=t});var y=[];s.metaqx=d.thread(function(e,t){-1==y.indexOf(e)&&y.push(e),b[e]?d.isarr(b[e])||(b[e]=[b[e]]):b[e]=[],b[e].push(t)});var _={};s.ctr=d.thread(function(e,t){void 0===t&&(t=1),t&&(_[e]=(_[e]||0)+t)}),s.auctionConfigured=d.thread(function(e){var i=[];e.eachUnit(function(e){var n=[],t=p(e.all_sizes);e.eachBidReqConf(function(e){var t=e.bidder_id+"@"+m(e.bidder_unit_id),i=p(e.all_sizes);n.push(t+"^"+i)}),i.push(e.id+"^"+t+":"+n.join(","))});var t=e.instancectr+"//"+i.length+"-"+i.join("_");e.eachUnit(function(e){t+="&bu="+e.unique_id}),h(1,1,t)});function w(e){var t=[Math.round(e.ms)];return(e.cpm||e._bid_cpm)&&(t.push(e.cpm),t.push(e.width),t.push(e.height),e._bid_cpm!=e.cpm&&(t.push(e._bid_cpm),t.push(e._min_cpm),t.push(e.blocked?e.blocked:0))),t.join(",")}s.auctionCompleted=d.thread(function(r){var a=[],n=[];r.eachBidRequest(function(i,e){var t=[r.instancectr,i.id,e.bidder_id,m(e.bidder_unit_id)].join(","),n=[];d.each(e.responses,function(e){var t=i.getWinner()===e?1:0;n.push(t+","+w(e))}),a.push(t+":"+n.join(":"))}),r.eachUnit(function(e){var t=e.getWinner();if(t){var i=JSON.stringify(t.extras);i="{}"==i?"":encodeURIComponent(i),n.push([r.instancectr,e.id,t.config.bidder_id].join(",")+":"+e.unique_id+":"+i)}});var e=a.join("&b=");n.length&&(e+="&bw="+n.join("&bw=")),h(11,1,e)}),s.bidRendered=d.thread(function(e){var t=[e.config.unit.auction.instancectr,e.config.unit.id];t.push(e.config.bidder_id),t.push(e.config.bidder_unit_id),t.push(e.cpm),t.push(e.width),t.push(e.height),t.push(e.config.unit.unique_id);var i=JSON.stringify(e.extras);"{}"!=i&&t.push(encodeURIComponent(i));var n="1:"+t.join(",");c.libSettings().record_bidids&&(n+="&b=4:"+[e.config.unit.unique_id,e.config.unit.id,e.id].join(","));a(12,100,"&b=",n)}),s.enhRendered=d.thread(function(e,t){a(12,100,"&b=","3:"+[e,t].join(","))}),s.gptRendered=d.thread(function(e,t,i){a(12,100,"&b=","2:"+[e.instancectr,t.id,v(i.advertiserId),v(i.campaignId),v(i.creativeId),i.isEmpty||"",v(i.lineItemId),i.size?f(i.size[0],i.size[1]):"",v(i.sourceAgnosticCreativeId),v(i.sourceAgnosticLineItemId),t.unique_id].join(","))}),s.gptViewed=d.thread(function(e,t,i){a(15,100,"&b=","1:"+[e.instancectr,t.id,t.unique_id].join(","))}),s.gprog=d.thread(function(e){a(16,100,"&b=","1:"+JSON.stringify(e))}),s.lateBid=d.thread(function(e){var t=[e.config.unit.auction.instancectr,e.config.unit.id,e.config.bidder_id,e.config.bidder_unit_id].join(",");a(13,500,"&b=",t+":"+w(e))}),d.onerr(function(){try{var t="";d.each(arguments,function(e){null!=e&&("object"==typeof e?e=e.stack?(e.message||"")+" "+e.stack:JSON.stringify(e):"string"!=typeof e&&"number"!=typeof e&&(e=e.toString?e.toString():String(e)),t+=" "+e)}),t=t.substr(0,300)+(300<t.length?"...":""),t="500.1:"+d.perfts()+":"+t,a(3,1e3,"&e=",t)}catch(e){d.isdebug()&&console.error("AdBridg error report failed: ",e)}}),s.rec=d.thread(function(e){a(17,500,"&b=",e)}),d.onrec(s.rec)},{"./config.js":13,"./utils.js":22}],11:[function(e,t,i){var f=e("./utils"),p=(e("./unit"),e("./analytics")),m=e("./modules"),h=e("./config"),n=0;t.exports=function(){this.instancectr=++n,this.id=f.genID("A"),this.ts=0,this.jsts=0,this.max_ms,this.ajax_ms=h.libSettings().ajax_ms,"function"==typeof this.ajax_ms&&(this.ajax_ms=this.ajax_ms());var a=this,o={},s=[],d=[],c=[],u=!1,l=[],g=!1;this.addUnit=function(e){return d.push(e),c.push(e.alias),e.auction=a,e.eachBidder(function(e,t){o[e]||(o[e]=t,.5<Math.random()?s.push(e):s.unshift(e))}),a.max_ms=a.max_ms?Math.min(a.max_ms,e.max_ms):e.max_ms,(!a.ajax_ms||a.ajax_ms<a.max_ms)&&(a.ajax_ms=a.max_ms+200),a},this.hasUnit=function(){return 0<d.length},this.eachUnit=function(e){f.each(d,e)},this.findUnit=function(e){for(var t=0;t<d.length;++t){if(e(d[t]))return d[t]}return!1},this.eachBidRequest=function(e,i){"function"==typeof e&&(i=e,e=!1),this.eachUnit(function(t){t.eachBidReqConf(e,function(e){i(t,e)})})},this.getUnitByBidReqId=function(t){var i=!1;return a.eachUnit(function(e){e.getBidReqConf(t)&&(i=e)}),i},this.getBidRequest=function(t){var i=!1;return a.eachUnit(function(e){i=i||e.getBidReqConf(t)}),i},this.markBidEmpty=function(e){var t=a.getUnitByBidReqId(e);t?t.addEmptyBid(e):f.err("Cannot mark bid empty: unknown id",e)},this.markBidderEmpty=function(t){a.eachUnit(function(e){e.markEmpty(t)})},this.isDone=function(){return u},this.lock=function(e){-1==l.indexOf(e)&&(f.log("Auction ",a.id," locked: ",e),l.push(e))},this.unlock=f.wrapAsync(function(e){var t=l.indexOf(e);-1!=t?(l.splice(t,1),f.log("Auction ",a.id," unlocked: ",e,l),!l.length&&g&&g()):f.log("Auction ",a.id," lock not found: ",e)}),this.execute=function(e){a.ts=f.dts(),a.jsts=(new Date).getTime();var t=h.libSettings().fbo;"function"==typeof t&&(s=t(o)),f.log("Auction",a.id,"starting with",d.length,"units:",c,"/ bidders:",s,"/ timeout:",a.max_ms),p.auctionConfigured(a),m.trigger("auction.start",a);var i=f.wrapAsync(function(){u||(u=!0,a.eachUnit(function(e){e.halt()}),p.auctionCompleted(a),m.trigger("auction.complete",a),e(a))}),n=f.wrapAsync(function(){if(l.length)return f.log("Auction ",a.id,"waiting on locks",l),void(g=i);i()}),r=0;a.eachUnit(function(e){e.onReady(f.wrapAsync(function(){u||++r>=d.length&&(f.log("Auction ",a.id," received bids for ",r," / ",d.length," units. Duration: ",f.dts()-a.ts,"ms"),n())}))}),f.each(s,function(e){var t=o[e];f.thread(function(){t.execute(a)})()}),setTimeout(function(){u||(f.log("Auction ",a.id," timing out with ",r," / ",d.length," units completed. Duration: ",f.dts()-a.ts,"ms"),n())},a.max_ms)}}},{"./analytics":10,"./config":13,"./modules":15,"./unit":21,"./utils":22}],12:[function(o,e,t){function i(e,t){var i=o("./shim.js"),n=t&&t.bidId||i.getUniqueIdentifierStr(),r=t&&t.src||"client",a=e||0;this.bidderCode=t&&t.bidder||"",this.width=0,this.height=0,this.statusMessage=function(){switch(a){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),this.adId=n,this.mediaType="banner",this.source=r,this.getStatusCode=function(){return a},this.getSize=function(){return this.width+"x"+this.height}}e.exports={createBid:function(e,t){return new i(e,t)}}},{"./shim.js":20}],13:[function(t,e,o){function d(e,t,i){var n=t.mapping_rules;if(!n)return!1;var r=e.get("gpt_slot"),a=r.getAdUnitPath(),o=e.get("gpt_sizes"),s=e.get("dom_id");for(var d in n){if(!n.hasOwnProperty(d))return;var c=n[d],u=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if("vp.max_width"==d&&c<u)return!1;if("vp.min_width"==d&&u<c)return!1;if("lib"==d.substr(0,3)){var l=i[d.substr(4)];if(("function"==typeof l&&l(r,a,o,s))!=c)return!1}if("gpt.adunit"==d&&c!=a)return!1;if("gpt.adunit_regex"==d&&!new RegExp(c,"i").test(a))return!1;if("gpt.domid"==d&&c!=s)return!1;if("gpt.domid_regex"==d&&!new RegExp(c,"i").test(s))return!1;if("gpt.has_size"==d&&!o.match(c))return!1;if("gpt.no_size"==d&&o.match(c))return!1}return g.log("Unit mapped: ",s,"->",t.alias),!0}function c(e,t){return{id:t[0],alias:t[1],size:t[2],other_sizes:t[3]||[],min_cpm:t[4],max_ms:t[5],settings:t[6]||{},rule_order:t[7],mapping_rules:t[8],bid_req_confs:t[9]}}var g=t("./utils"),r=t("./ajax"),u={c:"3340835",s:{bid_strategy:".05:.05-7.5,.5:8-20,1:21-40,2:42-50",track_imps:!0,post_view:function(e,t){if(t.gfyReload)return t.gfyReload("GPT")}},u:{1:[1,"Share Leaderboard Desktop","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Desktop_728x90$"},[[3,"div-gpt-ad-1539831873986-0",0,0],[5,"14183443",0,0],[8,"4979045",0,0],[9,"605440",0,0],[119,"67869",0,0],[157,"5986",{unitName:"cnsmbl-audio-728x90-slider",zoneIds:"[2001203]"},0]]],2:[2,"Share Desktop Rectangle","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"gfycat_desktop"},[[3,"div-gpt-ad-1536793174405-0",0,0],[5,"13955672",0,0],[8,"4949948",0,0],[9,"605439",0,0],[119,"67868",0,0],[157,"5985",{unitName:"cnsmbl-audio-300x250-slider",zoneIds:"[2001202]"},0]]],4:[4,"Share Mobile Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Mobile_320x50$"},[[3,"div-gpt-ad-1540311296874-0",0,0],[5,"14244150",0,0],[8,"4985060",0,0],[9,"605441",0,0],[113,"470011803533799_470532430148403",0,0],[119,"67871",0,0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0]]],5:[5,"Feed Mobile Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_MobileSearch"},[[3,"div-gpt-ad-1540917940531-0",0,0],[5,"14304874",0,0],[8,"4998446",0,0],[9,"605441",0,0],[113,"470011803533799_470532430148403",0,0],[119,"67871",0,0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0]]],6:[6,"Feed Desktop  Leaderboard","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"Newpages_ABF"},[[3,"div-gpt-ad-1557883006889-0",0,0],[5,"4979045",0,0],[8,"4979045",0,0],[9,"605440",0,0],[119,"67869",0,0],[157,"5986",{unitName:"cnsmbl-audio-728x90-slider",zoneIds:"[2001203]"},0]]],7:[7,"Feed Desktop Rectangle","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"Category_page"},[[3,"div-gpt-ad-1558157128054-0",0,0],[5,"13955672",0,0],[8,"4949948",0,0],[9,"605439",0,0],[119,"67868",0,0],[157,"5985",{unitName:"cnsmbl-audio-300x250-slider",zoneIds:"[2001202]"},0]]],8:[8,"Discover Desktop Leaderboard","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Discover_728x90$"},[[3,"div-gpt-ad-1557883006889-0",0,0],[5,"14183443",0,0],[8,"4979045",0,0],[9,"605440",0,0],[119,"67869",0,0],[157,"5986",{unitName:"cnsmbl-audio-728x90-slider",zoneIds:"[2001203]"},0]]],9:[9,"Discover Mobile Leaderboard","320x50",[],.04,2e3,0,0,{"gpt.adunit_regex":"Gfycat_Discover_320x50$"},[[3,"div-gpt-ad-1540311296874-0",0,0],[5,"14304874",0,0],[8,"4998446",0,0],[9,"605441",0,0],[113,"470011803533799_470532430148403",0,0],[119,"67871",0,0],[157,"5987",{unitName:"cnsmbl-audio-320x50-slider",zoneIds:"[2001204]"},0]]]}},l={},f={},i={};window.AdBridg=window.AdBridg||{cmd:[]},window.AdBridg.global=function(e,t){if(void 0===t)return g.logl("g","Global read: ",e,i[e]),i[e];i[e]=t,g.logl("g","Global set: ",e,t)},window.AdBridg.globals={version:"1.34.0-pre"},u.s.preconfigure_init&&g.wrapAsync(u.s.preconfigure_init)(u.s),o.getId=function(){return u.c},o.libSettings=function(){return u.s},o.kvp=function(e){var t=u.s.gpt_kvp_overrides;return t&&t[e]?t[e]:e},o.proc=function(e){u.s.pub=u.s.pub||{},g.each(e,function(e,t){u.s.pub[t]=e}),g.log("Publisher config update: ",JSON.stringify(u.s.pub)),t("./modules.js").trigger("pub.config",u.s.pub)},o.deca=function(e){if(u.s.alter_adb_pixel)try{e=u.s.alter_adb_pixel(e)}catch(e){g.err("Alter adb fail",e)}return e};o.configureUnit=function(e,t){var i=!1,n=[];for(var r in u.u)if(u.u.hasOwnProperty(r)){var a=c(0,u.u[r]);if(u.s.dynamic_configuration)try{var o=u.s.dynamic_configuration(a,u.s,e);if("object"!=typeof o&&!1!==o||(a=o),!a)continue}catch(e){g.err("Failed dynamic configuration",e)}if(t){if(t!=a.id)continue;i=a;break}if(a.rule_order)n[a.rule_order]=a;else if(d(e,a,u.s)){i=a;break}}if(!i&&n.length)for(var s=0;s<n.length;++s)if(n[s]&&d(e,n[s],u.s)){i=n[s];break}i&&(e.configure(i),function(e,t){var i;if(t.bid_req_confs&&t.bid_req_confs.length)for(var n=0;n<t.bid_req_confs.length;++n){var r=t.bid_req_confs[n],a={bidder_id:(i=r)[0],bidder_unit_id:i[1],settings:i[2]||{},mutate:i[3]||!1};0;var o=f[String(a.bidder_id)];g.qsab(o,a.bidder_id)&&(e.addBidder(o,l[o]),e.addBidReqConf(o,a,u.s))}}(e,i))},o.units=function(i){g.each(u.u,function(e,t){i(c(0,e))})};var n=u.s.usp;"function"==typeof n&&(n=n()),n&&g.cfusp(n.image,n.iframe,n.delay);var a=!1,s=!1,p=!1,m=!1,h=!1,v=u.s.cmp_allow_geofail,b=[],y=[],_=g.qs("adb_gdpr"),w=!1,x=u.s.cmp;"function"==typeof x&&(a=!0,x(u.s,function(e){g.log("Publisher CMP determined: ",e),x=e,a=!1,o.afterConsent()}));function A(e){for(w=e;y.length;)y.shift()(w)}function S(){g.err("GDPR block bids, allow DFP; cmp=",x),u.u=[],u.s.gptnpa&&(g.log("Setting NonPersonalizedAds=1"),googletag.cmd.push(function(){googletag.pubads().setRequestNonPersonalizedAds(1)})),A({gdprApplies:!0,consentString:""})}var z,B,j=u.s.cmp_fallback,k=0;o.afterConsent=function(e){clearTimeout(z);var t=u.s.cmp_check_interval,i=u.s.cmp_check_max,n="function"==typeof e;if(x)if(w)n&&e(w);else if(n&&(e=g.wrapAsync(e),y.push(e)),"pubblock"!=x){if("iab"==x||"conversant"==x){if("function"!=typeof window.__cmp)return t&&k<i?(s||(s=!0,g.log("CMP not present; checking every ",t,"ms; max ",i,"intervals")),void(z=setTimeout(function(){++k,o.afterConsent()},t))):void(B||(B=!0,j?(x=j,g.err("CMP fallback to",x),setTimeout(function(){o.afterConsent()},0)):g.err("CMP object not found; exiting!")));if(a)return;return a=!0,g.log("CMP check"),void __cmp("getVendorConsents",null,function(e){g.log("CMP consent: ",e);var t={consentString:e?"iab"==x?e.consentData:e.metadata:void 0,vendorData:e?e.vendorConsents:void 0,gdprApplies:e?e.gdprApplies:void 0};A(t)})}p||"geoblock"!=x&&"geoblockbids"!=x&&"geocmp"!=x||(p=!0,function(e){if(!h&&_&&(g.log("Emulating GDPR"),h={cc:"XX",gdpr:!0}),!h&&g.cr("adbnoteu")&&(g.log("Non-GDPR geo cookie found"),h={cc:"XX",gdpr:!1}),h)return e(h);b.push(e),m||(m=!0,g.log("Geolocation requested"),r({url:("http:"===location.protocol?"http:":"https:")+"//cc.adspsp.com",withCredentials:!0},function(e,t){if(e){if(g.err("geobfail1",e),!v)return;h={cc:"11",gdpr:!1}}else try{h=JSON.parse(t)}catch(e){if(g.err("geobfail2",e),!v)return;h={cc:"22",gdpr:!1}}for(g.log("Geolocation result",h),h.gdpr||g.cw("adbnoteu",1,5);b.length;)b.shift()(h)}))}(function(e){return e.gdpr?"geocmp"==x?(x=u.s.cmp_for_geo,a=p=!1,g.log("GDPR applies, establishing dependency on CMP: ",x),void setTimeout(function(){o.afterConsent()},0)):"geoblock"==x?g.err("GDPR block all",e.cc):(p=!1,void S()):(g.log("GDPR OK: CC",e.cc," not in EU."),A({gdprApplies:!1,consentString:""}),void(p=!1))}))}else S();else n&&e()};function T(n,r,a){o.afterConsent(function(e){if(e&&e.gdprApplies&&!e.consentString)return g.log("GDPR skip register",n,e);if(l[n])g.err("Duplicate bidder alias "+n);else{var t,i={bidder_id:(t=a)[0],settings:t[1]||{},mutate:t[2]||!1};0,l[n]=new r(n,i.bidder_id,i.settings,e),l[n].alias=n,l[n].id=i.bidder_id,l[n].settings=i.settings,l[n].mutate=i.mutate||!1,f[String(i.bidder_id)]=n}})}t("./modules.js").setup(o);var E=t("./adapters/consumable.js"),I=t("./adapters/emx_digital.js"),R=t("./adapters/fan.js"),C=t("./adapters/sovrn.js"),N=t("./adapters/aol.js"),U=t("./adapters/appnexusast.js");T("pubmatic",t("./adapters/pubmatic.js"),[3,{pubid:157495},0]),T("appnexus",U,[5,0,0]),T("aol",N,[8,{network:"11545.1"},0]),T("sovrn",C,[9,0,0]),T("facebook",R,[113,{test:!0},0]),T("emx",I,[119,0,0]),T("consumable",E,[157,{siteId:"2000766",networkId:"9969"},0])},{"./adapters/aol.js":2,"./adapters/appnexusast.js":3,"./adapters/consumable.js":4,"./adapters/emx_digital.js":5,"./adapters/fan.js":6,"./adapters/pubmatic.js":7,"./adapters/sovrn.js":8,"./ajax":9,"./modules.js":15,"./utils":22}],14:[function(e,t,n){if(window.googletag=window.googletag||{cmd:[]},window.AdBridg=window.AdBridg||{cmd:[]},!(AdBridg.exists||googletag&&googletag.cmd&&googletag.cmd===AdBridg.cmd)){AdBridg.exists=!0;var v=e("../utils.js"),p=e("../unit.js"),u=e("../auction.js"),b=e("../config.js"),y=e("../analytics.js"),_=e("../modules.js");if(!v.qs("adb_off")){var r=!1,a=[],d=!1,c=[],o=!1,h=[],s=[],w={},x={},A={},m={},l=!1,g=[],f=[],S={},z=[],B="Workflow |",j=!0,k=b.libSettings().sra_if;(k&&!k()||b.libSettings().no_sra)&&(j=!1);function T(e,t){e=Math.round(100*e);for(var i=function(e){if(!O[e=e||".05:.05-10"]){O[e]=[];for(var t=e.split(","),i=0;i<t.length;++i){var n=t[i].split(":"),r=n[1].split("-"),a={increment:Math.round(100*parseFloat(n[0])),upper:Math.round(100*parseFloat(r[1])),final:!1};i==t.length-1&&(a.final=a.upper-a.increment),O[e].push(a)}}return O[e]}(t),n=0;n<i.length;++n){var r=i[n];if(r.final&&e>=r.upper-r.increment)return{r:parseFloat(((r.final+r.increment)/100).toFixed(2)),kv:(r.final/100).toFixed(2)+"-"};if(!(e>=r.upper)){var a=Math.floor(e/r.increment)*r.increment/100,o=parseFloat((a+r.increment/100).toFixed(2)),s=o-.01;return{r:o,kv:Math.max(.01,a).toFixed(2)+"-"+s.toFixed(2)}}}}function E(e){var t,i,n=b.libSettings().gpt_clear_kvps,r=[],a=e.getTargetingMap(),o=!1;for(i in a)a.hasOwnProperty(i)&&("adb_"==i.substr(0,4)||n&&0<=n.indexOf(i)?o=!0:r.push([i,a[i]]));if(o)for(e.clearTargeting(),t=0;t<r.length;++t)e.setTargeting(r[t][0],r[t][1]);q(e)}function I(e,t){var i=b.libSettings().gpt_exclusions;if(i){var n=[];for(var r in i){var a=i[r];("function"==typeof a&&a(e,t)||a<=t)&&(e.setCategoryExclusion(r),n.push(r))}n.length&&v.log("Set GPT category exclusions for ",e.getAdUnitPath()," / ",e.getSlotElementId(),": ",n)}}function R(t,i,o){0;return v.wrapAsync(function(a){de("ra",function(){var r=[];a.eachUnit(function(t){if(a===d){if(!t.get("gpt_slot")||t.get("preload_used"))return;t.set("preload_used",1)}try{var e=b.libSettings().post_auc_ufilter;if(e){var i=e(t,o);if(i)return void v.log("Ignoring",t.alias,t.get("dom_id"),i)}}catch(e){v.err("Err auc unit filter ",t.alias,t.get("dom_id"),e)}try{if(t.settings.require_bid&&!t.getWinner())return v.log("Discarding unit ",t.alias,t.get("dom_id")," -- requires bid but had none."),void v.thread(function(){AdBridg.destroySlots([t.get("gpt_slot")])})();var n=t.getWinner();n&&n.config.unit.setImpData("adb_mtype",n.extras.mediaType),function(e){var t=b.libSettings().bid_strategy,i=e.getWinner(),n=e.get("gpt_slot");E(n),_.trigger("gpt.set_targeting",e,n);var r=e.get("adb_imp_data");if(r){var a=n.getTargeting("adb_imp")||[];v.isarr(a)||(a=[a]),v.each(r,function(e,t){e&&-1==a.indexOf(e)&&a.push(e)}),a.length&&n.setTargeting(b.kvp("adb_imp"),a)}if(b.libSettings().track_alias&&n.setTargeting(b.kvp("adb_cfg"),e.alias),!i)return n.setTargeting(b.kvp("adb_bdr"),["none"]),I(n,-1),_.trigger("gpt.no_hbc",e,n,function(e){return T(e,t)},function(e,t){q(e),I(e,t)});var o=(S[i.id]=i).config.dfp_bidder_name||i.config.bidder_name,s=i.cpm,d=b.libSettings().cur;d&&(d.exclude&&-1<d.exclude.indexOf(i.config.bidder_id)?v.log("Currency conversion skipped: ",i.config.bidder_name):(v.log("Currency conversion: USD = ",s,"; Rate = ",d.rate,"; DFP = ",d.rate*s),s*=d.rate));var c=T(s,t),u=c.kv;_.trigger("gpt.modify_hbc",e,n,{bid:i,range:c,mod:function(e){return c=T(s=e,t),u=c.kv,c}}),v.qs("adb_force_bidder")?(o="force",u=""):v.qs("adb_force_sf_bidder")&&(o="forcesf",u="");var l=b.libSettings().vs_threshold;if("function"==typeof l)try{var g=l(s);g&&n.setTargeting(b.kvp("adb_vs"),g)}catch(e){v.err("HVfail",e)}n.setTargeting(b.kvp("adb_bdr"),[o]),n.setTargeting(b.kvp("adb_hbc"),[u]),n.setTargeting(b.kvp("adb_adid"),[i.id]),n.setTargeting(b.kvp("adb_mtype"),[i.extras.mediaType]),v.log("Set GPT targeting for ",n.getAdUnitPath()," / ",n.getSlotElementId(),": ",o,u),I(n,s)}(t),r.push(t.get("gpt_slot"))}catch(e){v.err("Err setting unit ",t.alias,t.get("dom_id"),e)}});var e=f.concat(r);if(f=[],M(e),"function"==typeof t&&t(a),j&&!(e=L("AC",e)).length)return v.err("All units cancelled",a.id);(j||o)&&(K(),v.log(B,"GPT Batch: ",e.length),googletag.pubads().refresh(e,i),_.trigger("gpt.request_adbridg",a,o))})})}function C(){if(l){var e=g.length;if((g=L("PT",g)).length){if(v.isdebug()){var t=[];v.each(g,function(e){t.push(e.getAdUnitPath()+" / "+e.getSlotElementId())}),v.log("Non-bid request with",g.length," units: ",t)}de("rp",function(){var e=g;g=[],e.length&&(K(),M(e),v.log(B,"GPT PT Batch: ",e.length),googletag.pubads().refresh(e),_.trigger("gpt.request_passthrough",e))})}else e&&v.err("PT units cancelled")}}function N(e){v.log("Locked slot: ",e.getSlotElementId()),G[e.getSlotElementId()]=!0}function U(e,n,r){var a=[];a=Number(e[0])==e[0]?[e]:[].concat(e);var o=[];if(v.each(a,function(e,t){if("string"==typeof e[t]){var i=e[t].split("x");return 0!=i[0]&&0!=i[1]||v.err("0 size in",n,r,e[t]),void(e[t].match(/^\d+x\d+$/)||o.push(t))}0!=e[0]&&0!=e[1]||v.err("0 size in",n,r,e.join("x")),a[t]=e.join("x")}),o.length)for(var t=o.length-1;0<=t;--t)a.splice(t,1);return a}var O={},q=function(e){var t=b.libSettings().gpt_exclusions;if(t){do_erase=!1;var n=e.getCategoryExclusions();for(i=n.length-1;0<=i;--i){var r=n[i];t.hasOwnProperty(r)&&(n.splice(i,1),do_erase=!0)}if(do_erase)for(e.clearCategoryExclusions(),i=0;i<n.length;++i)e.setCategoryExclusion(n[i])}},P={},D={},M=function(e){v.each(e,function(e){var t=e.getSlotElementId(),i=(D[t]||0)+1;D[t]=i;var n=b.libSettings().track_imps;if(n)try{"string"!=typeof n&&(n="1:1-11"),imp_tracking=Math.floor(T(i,n).kv.split("-")[0]);for(var r=e.getTargeting("adb_imp"),a=r.length-1;0<=a;--a)String(r[a]).match(/^\d+$/)&&r.splice(a,1);r.push(imp_tracking),e.setTargeting(b.kvp("adb_imp"),r)}catch(e){v.err("Counter failed: ",e)}})},G={},L=v.wrapAsync(function(a,e,o){var s=b.libSettings().max_imp_ctr,d=[];return v.each(e,function(e){var t=e&&e.getSlotElementId?e:e.get("gpt_slot");if(t){var i=t.getSlotElementId();if(!A[i]){if(F("F"+a,i))return v.log("Slot excluded; element hidden",i);if(o){if(G[t.getSlotElementId()])return v.log("Cannot refresh locked dom_id: ",t.getSlotElementId());if(s){var n=D[i]||0;if(s<=n)return P[i]?v.log("Slot excluded; too many imps: ",t,n+" > "+s):v.err("Slot imp max: ",t.getAdUnitPath(),i,s)}}var r=[];if(_.trigger("gpt.filter_slot",a,t,o,r),r.length)return v.log("Module blocking",a,t,r);d.push(e)}}}),d}),F=function(e,t,i){var n=v.dom_invisible(t);if(n){i=i||0;var r=b.libSettings().block_invisible;if("function"==typeof r&&(r=r(e,t,n)),r)return v.err("DEI.R",e,t,n,i),n;v.err("DEI.A",e,t,n,i)}return!1};window.AdBridg.defineSlot=v.wrapAsync(function(e,t,i){var n=F("DS",i);if(n)return v.log("Slot definition blocked: ",i,n),!1;var r=b.libSettings().override_define;if("function"==typeof r)try{var a=r(e,t,i);a&&(a.dfp_ad_unit_path&&(e=a.dfp_ad_unit_path),a.dfp_sizes&&(t=a.dfp_sizes),a.dom_id&&(i=a.dom_id))}catch(e){v.err("DefineOverride",e)}t&&(!v.isarr(t)||t.length)||(y.ctr("dsea"),t=[1,1]);var o=googletag.defineSlot(e,t,i);if(!o)return o;o.addService(googletag.pubads()),N(o);var s=U(t,e,i),d=s.join(","),c=new p({dom_id:i,gpt_slot:o,gpt_sizes:d});c.restrictSizesTo(s),w[i]=d;var u=400,l=b.libSettings().lazy;if("function"==typeof l&&"number"==typeof(l=l(c,o,i,b.libSettings()))&&(u=l),l){v.log("Requiring lazy: ",i,"distance=",u),c.set("lock.lazy",1);var g=b.libSettings().lazy_measurement_filter;v.dom(i,u,0,function(){v.logl("wf",B,"unit triggered lazy load",c.alias,c.get("dom_id")),c.set("lock.lazy",!1),j?AdBridg.serve():AdBridg.display(i)},g,b.libSettings().lazy_compatible_collapse)}if(h.push(c),v.log(B,"Defined slot: ",e,i,d),_.trigger("gpt.define",c,o,e,t,i),b.libSettings().allow_serve_from_display&&m[i]&&(v.logl("wf",B,"triggering serve from define after display",i),AdBridg.serve()),!j){var f=b.libSettings().nonsra_poll;"function"==typeof f&&(f=f()),f&&(v.log("Nonsra poll for DOM ids"),V(i))}return o}),window.AdBridg.defineOutOfPageSlot=v.wrapAsync(function(e,t){var i=googletag.defineOutOfPageSlot(e,t);if(!i)return i;i.addService(googletag.pubads()),N(i);var n=new p({dom_id:t,gpt_slot:i,gpt_sizes:""});return h.push(n),v.log(B,"Defined OOP slot: ",e,t),_.trigger("gpt.define",n,i,e,!1,t),b.libSettings().allow_serve_from_display&&m[t]&&(v.logl("wf",B,"triggering serve from defineOOP after display",t),AdBridg.serve()),i});var J={},V=function(t){J[t]=J[t]||{ct:0,tx:-1};var i=J[t];clearTimeout(i.tx),10!=i.ct?(i.ct+=1,i.tx=setTimeout(v.wrapAsync(function(){if(!m[t]){var e=!!document.getElementById(t);if(v.log("Nonsra display poll #"+i.ct+": ",t,"; display received =",!!m[t],"; dom exists =",e),e)return v.log("Nonsra issuing display from poll",t),void AdBridg.display(t);V(t)}}),1e3)):v.log("Nonsra display poll is giving up on",t)};window.AdBridg.display=v.wrapAsync(function(e,t,i){if(i?(AdBridg.defineSlot(e,t,i),AdBridg.serve()):i=e,m[i]=!0,v.logl("wf",B,"display received",i),b.libSettings().allow_serve_from_display&&h.length&&(v.logl("wf",B,"triggering serve from display",i),AdBridg.serve()),l=!0,!j){h.length&&(s=s.concat(h),h=[]);for(var n=s.length-1;0<=n;--n){var r=s[n].get("dom_id");if(m[r]){var a=s.splice(n,1)[0];if(!a.get("gpt_sizes")){v.logl("Ignoring display for unit with no sizes",r);continue}h.push(a)}}return h.length?(v.logl("wf",B,"nonsra issuing serve",h.length),void Y(function(n,r){de("dn",function(){n?n.eachUnit(function(e){v.logl("wf",B,"display resolved",e.get("dom_id"),"auction=",n),googletag.display(e.get("dom_id")),_.trigger("gpt.request_nosra",e.get("dom_id"))}):(v.logl("wf",B,"display resolved",r," as passthrough"),googletag.display(r),_.trigger("gpt.request_nosra",r));var e=s.length;if(e){v.logl("wf",B,"nonsra units queued: ",e);for(var t=e-1;0<=t;--t){var i=s[t].get("dom_id");if(m[i]){setTimeout(function(){AdBridg.display(i)},0);break}}}})})):void v.logl("wf",B,"nonsra display waiting on definition/serve")}de("ds",function(){K(),v.logl("wf",B,"display resolved",i),googletag.display(i)}),C()}),window.AdBridg.refresh=v.wrapAsync(function(e,t){if(e=e||googletag.pubads().getSlots(),b.libSettings().allow_serve_from_refresh&&h.length){for(var i=e.length-1;0<=i;i--)for(var n=h.length-1;0<=n;n--)e[i]===h[n].get("gpt_slot")&&e.splice(i,1);if(AdBridg.serve(),!e.length)return}var r=e.length;if(e=L("RF",e,!0),v.logl("wf",B,"refresh: ",r,"slots requested; ",r-e.length,"filtered out;",e.length,"remaining."),e.length){var o=new u,s="no_auction"!=b.libSettings().refresh,d=[],c=[];v.each(e,function(e){try{E(e)}catch(e){return v.err("Failed to clear slot: ",e)}var t=e.getSlotElementId();N(e);var i=w[t]||"";if(x[t]){var n=x[t].adb||x[t].gpt,r=n&&"0x0"!=n&&n.match(/^\d{2,}x\d{2,}\d/);v.logl("sz","Refresh size restriction for",t,"=",n,"; is_valid=",r),r&&(i=n)}var a=new p({dom_id:t,gpt_slot:e,gpt_sizes:i,is_refresh:!0});s&&(b.configureUnit(a),v.logl("sz","Refresh restricting sizes to ",i),a.restrictSizesTo(i.split(","))),a.hasBidReqConf()?o.addUnit(a):(c.push(e.getAdUnitPath()+" / "+e.getSlotElementId()),d.push(e))}),d.length&&(v.log("Refreshing",d.length,"non-bid units: ",c),de("rn",function(){K(),M(d),v.log(B,"GPT RF Batch: ",d.length),googletag.pubads().refresh(d,t),_.trigger("gpt.request_passthrough",d,!0)})),o.hasUnit()&&(z.push(o),o.execute(R(null,t,!0)))}else r&&v.err("RF units cancelled")});var W={},H=v.wrapAsync(function(e){var t=String(e.message?e.message:e.data),i=t.substr(0,9),n=t.substr(10);return"adbsrverr"==i?v.err("Safeframe error: ",n):"adbsrvlog"==i?v.log("Safeframe: ",n):"adbsrvreq"==i?W.hasOwnProperty(n)?v.err("SafeframeDupe:",n):void AdBridg.render({safeframe:!0,source:e.source},n):void 0});window.addEventListener?window.addEventListener("message",H,!1):document.attachEvent&&window.attachEvent("onmessage",H),window.AdBridg.render=v.wrapAsync(function(t,e){var i,n=!("object"!=typeof e);if(n)i=e,v.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," [override] creative from ",i.config.bidder_name," BR ",i.config.id);else{if(!S[e])return void v.err("Render failed for ID ",e);i=S[e],v.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," creative from ",i.config.bidder_name," BR ",i.config.id),y.bidRendered(i)}var r=i.config.unit.get("dom_id"),a=v.dom_invisible(r);F("AR",r,i.config.bidder_id),a&&v.log("AdBridg render detected invisible container at time of render:",r,a);var o={config:i.config.unit.alias,bidder:i.config.bidder_name,size:i.width+"x"+i.height,extras:i.extras,dom_id:r};n&&(o.override=1);var s=JSON.stringify(o);if(_.trigger("bid.render",i,o),t.safeframe&&t.source&&t.source.postMessage){var d=b.libSettings().pmmutatefn;if(!i.creative)return v.err("Safeframe render fail: no creative");var c={ad:"\x3c!-- AdBridg Delivery (SF): "+s+" --\x3e"+i.creative};"function"==typeof d&&(c=d(i,c)),t.source.postMessage("adbsrvad:"+JSON.stringify(c),"*")}else if(i.creative){var u=b.libSettings().pubrenderfn,l=!1;"function"==typeof u&&(t.write("\x3c!-- AdBridg Delivery (ER): "+s+" --\x3e"),u(t,i.creative,i.config.bidder_name,i.width,i.height,i)?(l=!0,v.log("Creative rendered externally")):v.log("External render skipped")),l||(t.write("\x3c!-- AdBridg Delivery: "+s+" --\x3e"),t.write(i.creative),t.close())}else if(i.creative_url)try{var g=v.iiframe();g.width=i.width,g.height=i.height,g.style.display="inline",g.style.overflow="hidden",g.src=i.creative_url,t.body.appendChild(document.createComment("AdBridg Delivery: "+s)),t.body.appendChild(g)}catch(e){v.err("Delivery failure from ",i.config.bidder_name," / ",i.config.bidder_unit_id,e)}else{if("function"!=typeof i.render)return v.err("No creative from ",i.config.bidder_name," / ",i.config.bidder_unit_id);i.rawbid.adUnitCode=document.getElementById(r).children[0].id,document.getElementById(i.rawbid.adUnitCode).innerHTML="",i.render(),v.rec("winner.render:"+i.id)}var f=i.resize_pad_top||!1,p=document.getElementById(r);if(p.style.textAlign="center",function(e){var t=e.getElementsByClassName("adbridg-dyn-pad");if(t.length&&v.each(t,function(e){e.parent.removeChild(e)}),f){var i=v.prepend(e,"span");i.className="adbridg-dyn-pad",i.innerHTML="&nbsp;",i.style="display:block;width:1px;height:"+f+"px;overflow:hidden;";var n=document.createElement("span");n.className="adbridg-dyn-pad",n.innerHTML="&nbsp;",n.style="display:block;width:1px;height:"+f+"px;overflow:hidden;",e.appendChild(n)}}(p),t.safeframe)try{var m=p.getElementsByTagName("iframe");v.each(m,function(e){e.contentWindow===t.source&&(v.logl("RS","RS SF element: ",e.id,i.width,i.height),v.resize_element(e,i.width,i.height),String(e.parentNode.id).match(/google_ads_iframe.*container/)&&(v.logl("RS","RS SF parent: ",e.parentNode.id,i.width,i.height),v.resize_element(e.parentNode,i.width,i.height)))})}catch(e){v.err("Frame resize fail: ",e)}else t.defaultView&&t.defaultView.frameElement&&(t.defaultView.frameElement.width=i.width,t.defaultView.frameElement.height=i.height),v.logl("RS","RS iframe: ",i.width,i.height),v.resize_iframe(window,t,i.width,i.height);b.libSettings().refresh_keep_size&&(x[r]||(x[r]={gpt:"",adb:""}),x[r].adb=o.size,v.log("SIZE REFRESH KEEPING ADB: ",r,x[r]));var h=b.libSettings().post_render;"function"==typeof h&&h(i)});var $=[];window.AdBridg.sizeMapping=v.wrapAsync(function(){var e,i=[],n=googletag.sizeMapping(),r={addSize:v.wrapAsync(function(e,t){return n.addSize(e,t),i.push([e,t]),r}),build:v.wrapAsync(function(){return e=n.build(),$.push({gpt_map:e,sizes:i}),e})};return r}),window.AdBridg.useSizeMapping=v.wrapAsync(function(e,t,i){var n,r=!1,a=e.getSlotElementId(),o=e.getAdUnitPath();for(n=$.length-1;0<=n;--n)if($[n].gpt_map===t){r=$[n].sizes;break}if(r){var s=v.vp(),d=s.w,c=s.h,u=!1,l=[];for(n=r.length-1;0<=n;--n){var g=r[n][0];if(d>=g[0]&&c>=g[1]){if(u){if(u[0]>g[0])continue;if(u[0]==g[0]&&u[1]>g[1])continue}u=g,l=r[n][1]}}var f=U(l,o,a),p=f.join(",");w[a]=p;var m=i||!1;if(!m)for(n=h.length-1;0<=n;--n)if(h[n].get("gpt_slot")===e){m=h[n];break}if(!m)return v.err("No unit for size map: ",o,a);m.set("gpt_sizes",p),m.restrictSizesTo(f),w[a]?v.log("Applied size mapping to ",a," / ",o,": ",p):(A[a]=1,v.log("Excluding unit ",a," / ",o," because it has no valid sizes"))}else v.err("Size mapping not found: ",o,a)}),window.AdBridg.resetInternals=function(){};var X=!(window.AdBridg.destroySlots=function(e){e=e||googletag.pubads().getSlots();var i=[];return v.each(e,function(e){if(e){var t=e.getSlotElementId();delete D[t],delete w[t],delete x[t],delete A[t],delete G[t],delete m[t],v.undom(t),_.trigger("gpt.destroy",e,t),i.push(t)}}),v.log("Destroyed slots: ",i),googletag.destroySlots(e)}),K=function(){if(!X){X=!0;var e=b.libSettings().before_gpt;"function"==typeof e&&v.wrapAsync(e)(),_.trigger("gpt.before_enable_services"),googletag.enableServices(),_.trigger("gpt.after_enable_services")}},Q=!1,Y=v.wrapAsync(function(e){v.logl("wf",B,"serve called with",h.length,"pending units");var t=!1;K();for(var i=!1,n=0;h.length>n;){var r=h.shift();if(r.get("lock.lazy"))v.logl("wf",B,"serve skipped lazy",r.alias,r.get("dom_id")),n+=1,h.push(r);else{var a=r.get("dom_id");if(A[a]||!F("AS",a))if(b.configureUnit(r),r.hasBidReqConf()){if(d){var o=c.indexOf(r.id);if(0<=o){var s=!1;if(d.eachUnit(function(e){if(e.id==r.id){s=!0,c.splice(o,1),v.log("Proxy into preload ",r.alias);var t=r.get("gpt_slot"),i=r.get("dom_id"),n=w[i]||r.get("gpt_sizes")||"";e.set({dom_id:i,gpt_slot:t,gpt_sizes:n}),e.restrictSizesTo(n.split(",")),_.trigger("unit.pre_attach",e)}}),s){i=!0;continue}}}(t=t||new u).addUnit(r)}else j?g.push(r.get("gpt_slot")):(M([r.get("gpt_slot")]),v.thread(e)(!1,r.get("dom_id")));else v.err("Slot rejected before auction, element hidden:",a)}}(t||d)&&b.libSettings().gpt_keep_oop&&g.length&&(v.log("Batching passthrough units with auction units"),f=f.concat(g),g=[]),t&&(z.push(t),t.execute(R(e)),t=!1),i&&!Q&&(Q=!0,ge(R())),C()}),Z=!1;window.AdBridg.serve=function(e){if(clearTimeout(Z),j){v.logl("wf",B,"queuing serve");var t=b.libSettings().batch_delay;if("function"==typeof t&&(t=t(h)),0===t)return v.log("Starting auctions ASAP."),Y(e);t=t||100,Z=setTimeout(function(){Y(e)},t)}else for(var i=h.length-1;0<=i;--i){var n=h[i].get("dom_id");if(m[n]){setTimeout(function(){AdBridg.display(n)},0);break}}};function ee(e){for(var t,i,n=z.length-1;0<=n&&!(t=(i=z[n]).findUnit(e));--n);return!t&&d&&(t=(i=d).findUnit(e)),!!t&&{auction:i,unit:t}}var te=v.wrapAsync(function(t){var e,i=t.slot.getSlotElementId();!t.isEmpty&&F("RE",i)&&v.log("Slot rendered from GPT, but element hidden by CSS:",i);try{e=t.slot,v.log("Unlocked slot: ",e.getSlotElementId()),G[e.getSlotElementId()]=!1,E(e)}catch(e){v.err("Unlock failed")}var n=D[i];_.trigger("gpt.render_raw",t,n);var r=ee(function(e){return e.get("gpt_slot")===t.slot});if(b.libSettings().refresh_keep_size&&t.size&&2==t.size.length&&(x[i]||(x[i]={gpt:"",adb:""}),x[i].gpt=t.size.join("x")),r){if(!r.auction)return v.err("AUQ",t.slot.getAdUnitPath(),t.slot.getSlotElementId());y.gptRendered(r.auction,r.unit,t),_.trigger("gpt.render",r.unit,t,n),v.qdusp()}}),ie=v.wrapAsync(function(t){_.trigger("gpt.viewed_raw",t);var e=ee(function(e){return e.get("gpt_slot")===t.slot});if(e){y.gptViewed(e.auction,e.unit);try{var i=b.libSettings().post_view;"function"==typeof i&&i(t,e.unit)}catch(e){v.err("PostView fail",e)}_.trigger("gpt.viewed",t.slot,e.unit);var n=t.slot.getSlotElementId();F("VE",n)&&v.log("Slot viewed from GPT, but element hidden by CSS:",n)}}),ne=[],re={};window.AdBridg.lock=function(e){if(re[e])return re[e]=null,v.log("-== GPT lock already cleared: ",e);v.log("-== GPT locked by: ",e),ne.push(e)},window.AdBridg.unlock=function(e,t){for(var i=!1,n=0;n<ne.length;++n)if(ne[n]==e){v.log("-== GPT lock cleared: ",e),ne.splice(n,1),i=!0;break}i||t||(re[e]=!0,v.log("-== GPT unrecognized lock cleared: ",e)),ce()};function ae(){AdBridg.cmd.unshift(function(){window.AdBridg.lock("window.focus"),ue<=99&&(ue+=1),y.meta("wb",ue)})}function oe(){AdBridg.cmd.push(function(){window.AdBridg.unlock("window.focus",!0),y.meta("wb",0)})}var se=[],de=function(e,t){se.push({n:e,f:v.wrapAsync(t)}),ce()},ce=function(){if(!ne.length)for(se.length;se.length;){se.shift().f()}},ue=0;window.addEventListener?(window.addEventListener("blur",ae),window.addEventListener("focus",oe)):window.attachEvent&&(window.attachEvent("onblur",ae),window.attachEvent("onfocus",oe)),v.isdebug()&&(AdBridg.auctions=z,AdBridg.utils=v);var le=v.wrapAsync(function(){_.trigger("adb.init"),googletag.pubads().addEventListener("slotRenderEnded",te),googletag.pubads().addEventListener("impressionViewable",ie),r=!0;var e=b.libSettings().initfn;for(e&&AdBridg.cmd.push(e);a.length;){var t=a.shift();AdBridg.cmd.push(t)}});window.AdBridg.lazy=function(e,t,i,n){"function"==typeof i&&(n=i,i=0),v.dom(e,t,i,n)},v.log("First execution."),b.afterConsent(function(e){if(!e||!e.gdprApplies||e.consentString){function t(i){function n(e){function t(e){2==e.length&&1<e[0]&&1<e[1]?i.push(e):v.err("Invalid preload size: ",e)}var i=[];return v.isarr(e)&&(v.isarr(e[0])?v.each(e,t):t(e)),i}var r=n(i.size||[]);return function(){var e=AdBridg.defineSlot(i.gpt_path,r,i.dom_id);if(v.isarr(i.size_map)){var t=AdBridg.sizeMapping();v.each(i.size_map,function(e){t.addSize(e.viewport,n(e.sizes))}),t=t.build(),e.defineSizeMapping(t),AdBridg.useSizeMapping(e,t)}AdBridg.serve()}}for(var i=b.libSettings().preload&&b.libSettings().preload()||[],n=AdBridg.cmd.length;0<=n;n--){var r=AdBridg.cmd[n];r&&r.gpt_path&&AdBridg.cmd.splice(n,1,t(r))}i&&i.length&&(d=new u,v.each(i,function(e){if(e=parseInt(e,10),v.log("Preloading",e),e){var t=new p;if(b.configureUnit(t,e),!t.hasBidReqConf())return v.err("Preload bad id",e);c.push(e),d.addUnit(t)}}),d.hasUnit()&&(v.log("Preload kickoff",d),d.execute(v.wrapAsync(function(e){v.log("Preload complete"),o&&o(e)}))))}});var ge=function(e){d.isDone()?e(d):o=e};b.afterConsent(function(){googletag.cmd.push(function(){v.log("Initializing. SRA is",(j?"enabled":"disabled")+"."),j&&(googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad()),le()})}),v.wrapAsync(function(){for(AdBridg.cmd.push=AdBridg.cmd.unshift=function(t){if("function"==typeof b.libSettings().cmd_override)try{var e=b.libSettings().cmd_override(t);if(!e)return void v.log("AdBridg command cancelled",t);t=e}catch(e){v.err("CmdOverrideFail",e)}if("object"!=typeof t||(t.config&&(b.proc(t.config),delete t.config),!t.gpt_path&&t.events&&(v.each(t.events,function(e,t){_.on(t,e)}),delete t.events),t.action&&(v.log("Publisher event triggered: ","pub."+t.action),_.trigger("pub."+t.action),delete t.action),Object.getOwnPropertyNames(t).length))if(r){if("object"==typeof t&&(t.gpt_path||t.length))try{v.log("Initialization command object processing:",t);function i(r){googletag.cmd.push(function(){var i;if(r.oop)i=AdBridg.defineOutOfPageSlot(r.gpt_path,r.dom_id);else if((i=AdBridg.defineSlot(r.gpt_path,r.size||[1,1],r.dom_id))&&r.size_map){for(var e=AdBridg.sizeMapping(),t=0;t<r.size_map.length;t++)e=e.addSize(r.size_map[t].viewport,r.size_map[t].sizes);e=e.build(),i.defineSizeMapping(e),AdBridg.useSizeMapping(i,e)}if(i&&r.events){r.events["gpt.defined"]&&r.events["gpt.defined"](i);function n(t,e){r.events[t]&&googletag.pubads().addEventListener(e,function(e){e.slot===i&&r.events[t](i,e)})}n("gpt.rendered","slotRenderEnded"),n("gpt.viewed","impressionViewable"),n("gpt.visibilityChanged","slotVisibilityChanged")}})}if(t.length)for(var n=0;n<t.length;++n)i(t[n]);else i(t);t=function(){AdBridg.serve()}}catch(e){v.err("CmdObj fail",e)}"function"==typeof t&&setTimeout(function(){try{t.call()}catch(e){v.err("AdBridg.cmd had error: ",String(t).substr(0,30),e)}},0)}else a.push(t)};AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}})()}}},{"../analytics.js":10,"../auction.js":11,"../config.js":13,"../modules.js":15,"../unit.js":21,"../utils.js":22}],15:[function(e,t,i){function n(e){r.push(e)}var u=e("./utils.js"),r=[],a={},o={on:function(e,t){u.isarr(e)||(e=[e]),u.each(e,function(e){a[e]||(a[e]=[]),a[e].push(t)})}};i.trigger=u.wrapAsync(function(e){var t=arguments,i=(a[e]||[]).concat(a["*"]||[]);u.each(i,u.wrapAsync(function(e){e.apply(null,t)}))});var s=!1;u.onerr(u.wrapAsync(function(){if(s)return console&&console.log("AdBridg nested module errors"),void u.pixel("//adspsp.com/$CUSTOMER_PUBLIC_ID$/500/2/1/?e=errnest");s=!0,i.trigger("error",arguments),s=!1})),i.on=u.wrapAsync(function(e,t){o.on(e,t)}),i.setup=function(e){e};try{n(new(e("./modules/amazon.js"))({allowed_sizes:["300x250","320x50","728x90"],load_apstag:!0,init:{pubID:"f3c5730e-7996-451b-a4d8-96a519cdb88a",adServer:"googletag",bidTimeout:2e3}},o)),n(new(e("./modules/emit.js"))({"gpt.render":function(e,t,i){function n(e){return JSON.stringify(e,2)}var r=t.get("dom_id"),a=i.slot,o=t.alias,s=i.slot.getAdUnitPath();if(s.match(/\/(Newpages_ABF|Category_page|.*MobileSearch.*)/)){var d=i.advertiserId+"."+i.creativeId+"."+i.sourceAgnosticCreativeId;u.log("Reload setup check in render event:",n({auction:o,dom_id:r,ad_unit_path:s,timeout:3e4}));var c=!1;t.gfyReload=function(e){c||(c=!0,u.log("Reload scheduled from ",e,":",n({auction:o,dom_id:r,ad_unit_path:s,timeout:3e4})),"AdBridg"==e&&u.err("Reload track no GPT view",n({auction:o,dom_id:r,ad_unit_path:s,timeout:3e4,creative:d})),setTimeout(function(){u.log("Reload queuing lazy load check:",n({auction:o,dom_id:r,ad_unit_path:s,timeout:3e4})),u.dom(r,1,0,function(){u.log("Reload executing:",n({auction:o,dom_id:r,ad_unit_path:s,timeout:3e4})),AdBridg.refresh([a])})},3e4))},u.dom(r,.5,1e3,function(){c||(u.log("Reload AdBridg view event; triggering 3sec extra: ",n({auction:o,dom_id:r,ad_unit_path:s})),setTimeout(function(){t.gfyReload&&t.gfyReload("AdBridg")},3e3))})}}},o)),n(new(e("./modules/gamconfig.js"))({active:1,autostart:0,slots:[{dom_ad_class:"gfy-dt-sharepage-side",gpt_path:"/21732935168/gfycat_desktop",size:[[300,250]]},{dom_ad_class:"gfy-dt-sharepage-top",gpt_path:"/21732935168/Gfycat_Desktop_728x90",size:[[728,90]]},{dom_ad_class:"gfy-m-sharepage",gpt_path:"/21732935168/Gfycat_Mobile_320x50",size:[[320,50]]},{dom_ad_class:"gfy-dt-feed-top",gpt_path:"/21732935168/Newpages_ABF",size:[[728,90]]},{dom_ad_class:"gfy-dt-feed-side",gpt_path:"/21732935168/Category_page",size:[[300,250]]},{dom_ad_class:"gfy-m-feed-top",gpt_path:"/21732935168/Gfycat_MobileSearch_320x50",size:[[320,50]]},{dom_id:"gfycat-ampliffy",gpt_path:"/21732935168/Gfycat_Ampliffy",inject:1,size:[[1,1]]},{dom_ad_class:"gfy-dt-discover-top",gpt_path:"/21732935168/Gfycat_Discover_728x90",size:[[728,90]]},{dom_ad_class:"gfy-m-discover-top",gpt_path:"/21732935168/Gfycat_Discover_320x50",size:[[320,50]]}]},o))}catch(e){u.err("Module failed",e)}},{"./modules/amazon.js":16,"./modules/emit.js":17,"./modules/gamconfig.js":18,"./utils.js":22}],16:[function(e,t,i){var g=e("../utils.js"),a=e("../config.js"),f=(t.exports=function(s,e){function d(e){var n=[],r=s.allowed_sizes;return g.each(e,function(e,t){if(r&&-1==r.indexOf(e))return g.log("Amazon unsupported size: ",e);var i=e.split("x");i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),n.push(i)}),n}var c={},u={},o={},t=!g.qs("adb_enable_amzn")&&s.test;"function"==typeof t&&(t=t());var i=s.load_apstag;"function"==typeof i&&(i=i());function l(){if(n)return t;var e=s.init;return"function"==typeof e&&(e=e(a.libSettings())),e?(n=!0,t?(g.log("Amazon disabled. Use ?adb_enable_amzn=1 to activate."),t):window.apstag?(e.skip_init||apstag.init(e),void g.log("Amazon initialized:",e)):(i||r||(g.err("Amazon library not found."),r=!0),t=!0)):(g.log("Amazon init bypassed."),!1)}var n=!1,r=!1;t||!i||f()||(t=n=!0),e.on("unit.config",function(e,t){if(!l()){var i=t.get("dom_id"),n=t.get("gpt_slot");if(!i||!n)return g.log("Amazon skip",i,n);var r=n.getAdUnitPath()+"",a=s.get_slot_name?s.get_slot_name(r,i,n,t):(r.match(/([^\/]+)$/)||[""])[0];if(!a)return g.err("Amazon noname: ",a,i,r);var o={slotID:i,slotName:a,sizes:u[i]||d(t.all_sizes)};c[i]=o,g.log("Amazon slot configured",o,!!u[i])}}),e.on("unit.restrict_sizes",function(e,t,i){if(!l()){var n=t.get("dom_id");i=d(i),u[n]=i;var r=c[n];return r?(g.log("Amazon slot resize",r,i),void(r.sizes=i)):void 0}}),e.on("gpt.destroy",function(e,t,i){l()||(g.log("Amazon slot remove",i),delete c[i],delete u[i])}),e.on("unit.pre_attach",function(e,t){if(!l()){var i=t.get("dom_id"),n=c[i];if(!n)return g.log("Amazon preload mismatch",i);var r=t.auction,a="amazon."+t.id;r.lock(a),apstag.fetchBids({slots:[n],timeout:r.max_ms},g.wrapAsync(function(){g.log("Amazon preload response",r.id,arguments);try{apstag.setDisplayBids()}catch(e){g.err("Amazon setBids",e)}r.unlock(a)}))}}),e.on("auction.start",function(e,t){if(!l()){var n=[];if(t.eachUnit(function(e){var t=e.get("dom_id"),i=c[t];i?(n.push(i),c[t]=null):g.log("Amazon no config",t)}),n.length){var i={slots:n,timeout:t.max_ms};g.log("Amazon request",t.id,i);var r="amazon."+t.id;o[r]=!0,t.lock(r);var a=setTimeout(g.wrapAsync(function(){o[r]&&(o[r]=!1,t.unlock(r),g.err("Amazon incomplete at 50"))}),t.max_ms+50);apstag.fetchBids(i,g.wrapAsync(function(){g.log("Amazon response",t.id,arguments);try{apstag.setDisplayBids()}catch(e){g.err("Amazon setBids",e)}clearTimeout(a),o[r]&&(o[r]=!1,t.unlock(r))}))}}})},function(){g.log("Loading Amazon dependency");try{i="apstag",n=window,t=document,n[i]||(n[i]={init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=t.createElement("script")).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(a=t.getElementsByTagName("script")[0]).parentNode.insertBefore(r,a))}catch(e){return g.err("Amazon load failed",e),!1}function e(e,t){n[i]._Q.push([e,t])}var i,n,t,r,a;return!0})},{"../config.js":13,"../utils.js":22}],17:[function(e,t,i){var n=e("../utils.js");t.exports=function(t,e){e.on("*",n.wrapAsync(function(e){t[e]&&t[e].apply(null,arguments)}))}},{"../utils.js":22}],18:[function(e,t,i){function R(e){var t=e.js.split(".");if("window"==t[0]){var i=t[1];return window.hasOwnProperty(i)?window[i]:void 0}C.log("GamConfig JS read fail",e)}var C=e("../utils.js"),N=e("../config.js"),U={};t.exports=function(e,t){var B="adbridg-ad-class",j="adbridg-ad-class-loaded",k="adbridg-ad-class-invalid",T="adbridg-phase",E="adbridg_ad_",I=0;t.on("pub.spa_pv_initialize",function(){I=1});function i(e,t){var i=e.active;if(i&&i.js&&(i=R(i)),i&&i.url){new RegExp(i.url,"i");i=C.url().href.match(i.url)}if(i){if(C.log("GamConfig enabled",e),e.pageType){var n=[],r=e.pageType;r&&r.js&&(r=R(r)),C.each(e.slots,function(e){e.page_type===r&&n.push(e)}),C.log("GamConfig page type slots: ",{total_slots:e.slots.length,page_type_slots:n.length,slots:n}),e.slots=n}e.collapseEmptyDivs&&googletag.cmd.push(function(){googletag.pubads().collapseEmptyDivs()}),e.centering&&googletag.cmd.push(function(){googletag.pubads().setCentering(!0)});function a(e){AdBridg.cmd.push(function(){C.each(e,function(e,t){var i=e;e&&e.js&&(e=R(e)),e&&e.qs&&(e=C.qs(e.qs.match)?e.qs.value:void 0);void 0!==e?(C.log("GamConfig setting page targeting: ",t,e),googletag.pubads().setTargeting(t,e),o[t]=e):C.log("GamConfig targeting empty",t,e,i)})})}var o={};t.on("pub.config",function(e,t){a(t.targeting)}),e.targeting&&a(e.targeting);function g(e,t){var i=e.getAttribute(T)||"";i&&(i+=";");var n=(i+t+"@"+C.dts()+"ms").substr(0,200);200==n.length&&(n+="..."),e.setAttribute(T,n)}function s(){f={},p={},m={},v=!(h={}),C.each(e.slots,function(t){if(t.dom_ad_class)return v=!0,void(h[t.dom_ad_class]=t);var e=t.inject;if("function"==typeof e&&(e=e()),e&&!document.getElementById(t.dom_id)){var i=document.createElement("div");i.id=t.dom_id;try{document.body.appendChild(i)}catch(e){C.err("GamConfig cannot inject",t.dom_id,e)}}var n=t.dom_id;f[n]||p[n]?C.err("GamConfig duplicate dom_id",n):f[n]=t})}var f,p,m,h,v;s();function d(){clearTimeout(b),b=setTimeout(function(){x()||A()},10)}function c(e){for(var t=0;t<e.length;++t){var i=e[t];if("attributes"==i.type)return _(i.target,!1)?d():void 0;for(var n=0;n<i.addedNodes.length;++n){i.addedNodes[n];if(_(i.target,!0))return d()}}}function u(){MutationObserver?(x(),l&&A(),(l=new MutationObserver(c)).observe(document.body,{attributes:!0,attributeFilter:["id",B],childList:!0,subtree:!0}),C.log("GamConfig MutationObserver added")):(C.log("GamConfig polling started"),x())}var b,l,y,_=function(e,t){if(f[e.id])return!0;var i=e.getAttribute&&e.getAttribute(B);if(h[i])return!0;var n=e.children.length;if(t&&n)for(var r=0;r<n;++r)if(_(e.children[r],!0))return!0;return!1},w=e.scan_interval||200,x=function(){clearTimeout(b);var e,o=!1;if(v){o=!0;for(var t=document.querySelectorAll("["+B+"]"),i=0;i<t.length;++i){var n=t[i],r=n.getAttribute(B);if(r)if(h[r]){if(!n.id){var a=r.replace(/[^\w\d]+/gi,"");n.id=E+(U[e=a]=(U[e]||0)+1,e+"_"+U[e])}n.removeAttribute(B),n.setAttribute(j,r);var s=h[r],d=C.assign({dom_id:n.id},s);f[n.id]=d}else C.err("GamConfig invalid ad class attribute",r),n.removeAttribute(B),n.setAttribute(k,r)}}var c=[],u=[],l=[];return C.each(f,function(e,t){var i,r,n,a=document.getElementById(t);a?(a.innerHTML="",g(a,"detected"),l.push(t),p[t]||(p[t]=!0,c.push(e),e.gpt_path_builder&&(e.gpt_path=(r=""+(i=e).gpt_path_builder,n=r.match(/\{\{[^\}]+\}\}/g),C.log("GamConfig extracted curlies: ",n),C.each(n,function(e){var t=e.replace(/[\{\}]/g,""),i="";if(t.match(/^lib\.pub\./)){var n=t.replace("lib.pub.","");i=(N.libSettings().pub||{})[n],r=r.replace(e,i)}else C.err("GamConfig unsupported gpt_path_builder part:",e)}),C.log("GamConfig gpt_path_builder",i.gpt_path_builder,r),r)),e.events={"gpt.defined":function(e){g(a,"gpt_define")},"gpt.rendered":function(e,t){g(a,"gpt_render:"+t.sourceAgnosticCreativeId)},"gpt.viewed":function(e,t){g(a,"gpt_view")}}),m[t]=!0,u.push(t)):o=!0}),C.each(l,function(e){delete f[e]}),c.length&&(C.log("GamConfig configuring slots",c),AdBridg.cmd.push(c)),u.length&&AdBridg.cmd.push(function(){C.each(u,function(e){AdBridg.display(e)})}),o&&!MutationObserver&&(b=setTimeout(x,w)),o},A=function(){clearTimeout(b),l?(l.disconnect(),l=!1,C.log("GamConfig MutationObserver disconnected")):C.log("GamConfig polling stopped")},S=!1;t.on("pub.spa_pv_shutdown",function(){S=!0,C.log("GamConfig stopping for SPA"),s(),A(),C.each(o,function(e,t){C.log("GamConfig erasing KVP",t),googletag.pubads().setTargeting(t,[])});var n=[],r=[];C.each(googletag.pubads().getSlots(),function(e){var t=document.getElementById(e.getSlotElementId());if(t&&t.getAttribute(T)){n.push(e),r.push(t),g(t,"destroyed");var i=t.getAttribute(B)||t.getAttribute(j)||t.getAttribute(k);i&&(t.removeAttribute(j),t.removeAttribute(k),t.setAttribute(B,i),(t.id||"").match(E)&&t.removeAttribute("id"))}}),n.length&&AdBridg.destroySlots(n),S=!(U={})});var z=function(){clearTimeout(y),S?y=setTimeout(z,100):(C.log("GamConfig restarting SPA"),s(),u())};t.on("pub.spa_pv_initialize",z),0!=e.autostart||I?u():C.log("GamConfig waiting for publisher to initialize with action=spa_pv_initialize.")}else C.log("GamConfig not enabled")}var n=function(){document&&document.body?(C.log("Body loaded. Initialising Gamconfig module"),i(e,t)):setTimeout(n,100)};n()}},{"../config.js":13,"../utils.js":22}],19:[function(e,t,i){var s=e("./utils.js");function n(e){var t=this,i=e.url,n=e.config,r=e.id,a=e.callback,o=e.loaded;this.url=i,this.config=n,this.handlers={},this.id=r,this.loaded=o,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):s.err("Commands given to Renderer.push must be wrapped in a function")},this.callback=a||function(){t.loaded=!0,t.process()},s.load(i,this.callback,!0)}n.install=function(e){return new n({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded})},n.prototype.getConfig=function(){return this.config},n.prototype.setRender=function(e){this.render=e},n.prototype.setEventHandlers=function(e){this.handlers=e},n.prototype.handleVideoEvent=function(e){var t=e.id,i=e.eventName;"function"==typeof this.handlers[i]&&this.handlers[i](),s.log("Prebid Renderer event for id "+t+" type "+i)},n.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){s.err("Error processing Renderer command: ",e)}},t.exports=n},{"./utils.js":22}],20:[function(e,t,i){function g(e){return 2===e.length?e:e.split("x").map(Number)}function f(e){var t="GET"===e.method&&("object"==typeof e.data?h.toqs(e.data,!0):e.data);return{method:e.method,url:"GET"===e.method&&t?[e.url,"?",t].join(""):e.url,withCredentials:!1!==(e.options&&e.options.withCredentials),parseResponseJson:void 0===e.parseResponseJson||e.parseResponseJson,data:"POST"===e.method&&("object"==typeof e.data?JSON.stringify(e.data):e.data),contentType:(e.options||{}).contentType}}function r(e,t){return["<style>",".native-wrap{text-decoration: none;color:#000;font-family:sans-serif;}",".native-image{border:0;margin-right:1em;max-width:",t.config.size.split("x")[0]>>2,"px;max-height:",t.config.size.split("x")[1],"px;width:auto;height:auto;float:left;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<img class="native-image" alt="',e.title,'" src="',e.image.url,'"><div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-title">',e.title,"</div>",'<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</a>"].join("")}function p(e,t){return{creative:e.ad||(e.native?(i=e.native,((n=t).unit.settings&&n.unit.settings.nativeTemplate||r)(i,n)):void 0),vastUrl:e.vastUrl,vastXml:e.vastXml,cpm:e.cpm,width:e.native?0|t.config.size.split("x")[0]:e.width,height:e.native?0|t.config.size.split("x")[1]:e.height,extras:{dealid:e.deal_id,crid:e.creativeId,adv_id:e.adv_id,brand_id:e.brand_id,mediaType:e.mediaType},render:e.renderer&&e.renderer.render&&e.renderer.render.bind(e.renderer,e),rawbid:e};var i,n}function n(e,t){var i=document.createElement("a");t&&t.noDecodeWholeURL?i.href=e:i.href=decodeURIComponent(e);var n,r=t&&t.decodeSearchAsString;return{href:i.href,protocol:(i.protocol||"").replace(/:$/,""),hostname:i.hostname,port:+i.port,pathname:i.pathname.replace(/^(?!\/)/,"/"),search:r?i.search:(n=i.search||"")?n.replace(/^\?/,"").split("&").reduce(function(e,t){var i=t.split("="),n=i[0],r=i[1];return/\[\]$/.test(n)?(e[n=n.replace("[]","")]=e[n]||[],e[n].push(r)):e[n]=r||"",e},{}):{},hash:(i.hash||"").replace(/^#/,""),host:i.host||window.location.host}}var a,m=e("./ajax.js"),h=e("./utils.js"),o=e("./renderer.js"),s=e("./adapterManager"),v={auction:void 0,gdpr_consent_object:void 0},b={utils:{inIframe:function(){return!h.url().is_top},_map:function(i,n){if(!i)return[];if("function"==typeof i.map)return i.map(n);var r=[];return h.each(i,function(e,t){r.push(n(e,t,i))}),r},deepAccess:function(e,t){return t.split(".").reduce(function(e,t){return(e||{})[t]},e)},deepSetValue:function(e,t,r){return t.split(".").reduce(function(e,t,i,n){return i===n.length-1?e[t]=r:e[t]=e[t]||{}},e)},getTopWindowLocation:function(){return window.location},getTopWindowReferrer:function(){return h.url().referrer},getTopWindowUrl:function(){return h.url().href},getWindowSelf:function(){return window.self},getWindowTop:function(){return window.top},isArray:function(e){return Array.isArray(e)},parseSizesInput:function(e){return e.map(function(e){return e.join("x")})},_each:h.each,cookiesAreEnabled:function(){return navigator.cookieEnabled},logError:h.err,logWarn:h.log,logMessage:h.log,logInfo:h.log,getBidIdParameter:function(e,t){return t&&t[e]||""},getUniqueIdentifierStr:(a=0,function(){return++a+Math.random().toString(16).substr(2)}),convertCamelToUnderscore:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},convertTypes:function(n,r){return h.each(n,function(e){var t=n[e],i=n[e];r[e]="function"==typeof t?i(i):"string"===t?i&&i.toString():"number"===t?Number(i):i,isNaN(r[e])&&delete r[e]}),r},createTrackPixelHtml:h.pixelh,isEmpty:function(e){if(!e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},transformBidderParamKeywords:function(e,t){var n=[];return h.each(e,function(e,t){var i={key:t};Array.isArray(e)&&(i.value=e.map(function(e){return e+""})),null!=e&&(i.value=[e+""]),i.hasOwnProperty("value")&&n.push(i)}),n},tryAppendQueryString:function(e,t,i){return i?e+(t+"=")+encodeURIComponent(i)+"&":e},getValueString:function(e,t,i){return null==t?i:"string"==typeof t?t:t.toString()},isStr:function(e){return"string"==typeof e},assign:h.assign,isInteger:Number.isInteger||function(e){return Math.floor(e)===e&&isFinite(e)},isNumber:function(e){return"number"==typeof e},groupBy:function(e,i){return e.reduce(function(e,t){return(e[t[i]]=e[t[i]]||[]).push(t),e},{})},deepClone:function n(r){return Object.keys(r).reduce(function(e,t){var i={}.toString.call(r[t]).slice(8,-1);return e[t]="Array"===i?n(r[t]):"Object"===i?n(r[t]):"Date"===i?new Date(r[t].getTime()):"RegExp"===i?new RegExp(r[t]):r[t],e},Array.isArray(r)?[]:{})},flatten:function(e,t){return e.concat(t)},chunk:function(e,n){return e.reduce(function(e,t,i){return i%n?e[e.length-1].push(t):e.push([t]),e},[])},fill:function(e,t){for(var i=[];i.length<t;i.push("object"==typeof e?b.utils.deepClone(e):e));return i},getMaxValueFromArray:Function.apply.bind(Math.max,0),getMinValueFromArray:Function.apply.bind(Math.min,0),isArrayOfNums:function(e,t){return e.length===(t||e.length)&&e.reduce(function(e,t){return e&&"number"==typeof t},!0)},generateUUID:h.genUUID,getBidRequest:function(i,e){return find(e,function(e){return e.bids.some(function(t){return["bidId","adId","bid_id"].some(function(e){return t[e]===i})})})},insertUserSyncIframe:function(e){h.uspf("S2S",e)},triggerPixel:function(e){h.uspi("S2S",e)},uniques:function(e,t,i){return i.indexOf(e)===t},contains:function(e,t){return 0<e.length&&-1!==e.indexOf(t)},timestamp:function(){return(new Date).getTime()},getOrigin:function(){return h.url()},getDNT:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},getCookie:h.cr,isGptPubadsDefined:function(){return window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots},isSlotMatchingAdUnitCode:function(t){return function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}}},url:{parse:n},REPO_AND_VERSION:"prebid_prebid_1.19.0-pre",BANNER:"banner",VIDEO:"video",NATIVE:"native",ADPOD:"adpod",OUTSTREAM:"outstream",INSTREAM:"instream",config:{config:{},getConfig:function(e){switch(e){case"pageUrl":return h.url().href;case"bidderTimeout":return v.auction.max_ms;case"consentManagement.cmpApi":return v.gdpr_consent_object.cmpApi;default:return b.config.config[e]}},bidders:null,js:null,setDefaults:function(e){if("object"!=typeof defaults)return h.err("defaults must be an object");h.assign(b.config.config,e)}},parse:n,registerBidder:function(e){},userSync:{registerSync:function(e,t,i){var n="image"===e?h.uspi:"iframe"===e?h.uspf:void 0;n?n(t,i):h.err(["Unknown sync type: ",e," from ",t].join(""))}},includes:function(e,t){return-1!==e.indexOf(t)},find:function(e,t){return e.filter(t)[0]},Renderer:o,EVENTS:{BID_RESPONSE:"bidResponse",BIDDER_DONE:"bidderDone"},loadExternalScript:function(e,t){h.log("module "+t+"is loading external JavaScript"),h.load(e,null,!0)},adloader:{loadScript:h.load},Adapter:function(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}},S2S:{SRC:"s2s"},STATUS:{GOOD:1,NO_BID:2},S2S_VENDORS:{appnexus:{adapter:"prebidServer",cookieSet:!1,enabled:!0,endpoint:"//prebid.adnxs.com/pbs/v1/openrtb2/auction",syncEndpoint:"//prebid.adnxs.com/pbs/v1/cookie_sync",timeout:1e3},rubicon:{adapter:"prebidServer",cookieSet:!1,enabled:!0,endpoint:"//prebid-server.rubiconproject.com/openrtb2/auction",syncEndpoint:"//prebid-server.rubiconproject.com/cookie_sync",timeout:500}},adaptermanager:s,ajax:function(e,n,t,i){h.ajax(h.assign({},i,{data:t,url:e}),function(e,t,i){e&&n.error?n.error(e.err,e):n.success?n.success(t,i):n(t)})},bidfactory:{createBid:e("./bidFactory.js").createBid},cookieSet:function(e){h.load(e,null,!0)},events:{emit:function(){}},isValid:function(e,t,i){return!0},getIabSubCategory:function(e,t){return null},auctionManager:{getAdUnits:function(){return v.PBJSObjects.bidRequests}}};b.isArray=b.utils.isArray,b.isInteger=b.utils.isInteger,t.exports={wrap:function(l){return function(s,d,c,u){this.execute=function(t){v.auction=t,v.gdpr_consent_object=u,v.alias=s;var e=function(s,e,d,c){var u=[];if(s.eachBidRequest(e,function(e,t){var i={};h.assign(i,d,t.params),delete i.adjust,i[c]=t.bidder_unit_id,i.bidFloor=t.min_cpm,i.bidfloor=t.min_cpm;var n=t.all_sizes.map(g),r=t.mediaTypes||e.settings&&e.settings.mediaTypes||{banner:{sizes:n}};r&&r.video&&(i.video||(i.video={}),h.assign(i.video,(r||{}).video));var a=h.genUUID(),o={pubcid:e.get("mod_pubcid")};u.push({adUnitCode:e.get("dom_id"),auctionId:s.id,bidId:t.id,bidder:t.bidder_name,bidderRequestId:t.id,crumbs:o,userId:o,mediaTypes:r,nativeParams:r.native||t.nativeParams,params:i,sizes:1===Object.keys(r).length&&r.native?[]:n,transactionID:a,transactionId:a,renderer:(e.settings||{}).renderer})}),0!==u.length)return u.forEach(function(e,t,i){e.bidRequestsCount=i.length}),{bidderRequest:{auctionId:s.id,auctionStart:s.jsts,bidderCode:e,bidderRequestId:u[0].bidderRequestId,bids:u,gdprConsent:v.gdpr_consent_object,start:s.start,timeout:s.max_ms,doneCbCallCount:0,refererInfo:{referer:h.url().href,stack:[h.url().href],reachedTop:window.top===window,numIframes:0|!(window.top===window)}},bidRequests:u}}(t,s,c,l.unitIDKey);v.PBJSObjects=e;var r=h.wrapAsync(l.spec.buildRequests,void 0,l.spec)(e.bidRequests,e.bidderRequest);Array.isArray(r)||(r=[r]);var i,n,a=[],o=(i=s,n={},t.eachBidRequest(i,function(e,t){n[t.id]={config:t,unit:e}}),n);r.map(f).forEach(function(e,n){e.max_ms=t.ajax_ms,m(e,h.wrapAsync(function(e,t){if(a.push(t),!e&&t){var i=h.wrapAsync(l.spec.interpretResponse,void 0,l.spec)({body:t},r[n]);Array.isArray(i)||(i=[i].filter(Boolean)),i.forEach(function(e){var t,i,n=o[e.requestId];if(!n)return h.err(["unrequested response from",s,":",JSON.stringify(e)].join(" "));t=e,i=n.config,t.ad||t.native||t.renderer||(t.vastUrl||t.vastXml)&&i.renderer?n.unit.addBid(n.config,p(e,n)):n.unit.addEmptyBid(n.config),n.found=!0})}a.length===r.length&&function(){Object.keys(o).map(function(e){return o[e]}).filter(function(e){return!e.found}).forEach(function(e){e.unit.addEmptyBid(e.config)});[].concat(l.spec.getUserSyncs&&h.wrapAsync(l.spec.getUserSyncs,void 0,l.spec)({syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0},a.map(function(e){return{body:e}}))||[]).forEach(function(e){b.userSync.registerSync(e.type,d,e.url)})}()}))})}}},polyfills:b}},{"./adapterManager":1,"./ajax.js":9,"./bidFactory.js":12,"./renderer.js":19,"./utils.js":22}],21:[function(e,t,i){var j=e("./utils"),k=e("./analytics"),T=e("./modules"),E=e("./config");t.exports=function(e){this.id=0,this.alias="",this.size="",this.other_sizes=[],this.min_cpm=0,this.max_ms=0,this.settings={},this.unique_id=j.genID("U"),this.auction=!1,this.all_sizes=[],this.original_sizes=[];var _=this,u={},w={},l=0,n={},x=[],g={},r=!1,A=!1,t=!1,S=!1,f=!1,a=[];this.init=function(){e&&_.set(e)},this.restrictSizesTo=function(e){_.all_sizes=_.original_sizes,j.logl("sz","Unit",_.alias,"restrict sizes to",JSON.stringify(e)," old _allowed_sizes",JSON.stringify(f)),f=e,a.length&&_.allowSizes(a);for(var t=[],i=_.all_sizes.length-1;0<i;--i)if(-1===f.indexOf(_.all_sizes[i])){var n=_.all_sizes[i];_.all_sizes.splice(i,1);var r=_.other_sizes.indexOf(n);0<=r&&_.other_sizes.splice(r,1),t.push(n)}j.logl("sz","Unit",_.alias,"removed sizes",JSON.stringify(t),"allowed sizes",JSON.stringify(f)),T.trigger("unit.restrict_sizes",_,f,t)},this.allowSizes=function(e){a=[],j.each(e,function(e){j.logl("sz","Unit size added",_.alias,e),f&&-1==f.indexOf(e)&&f.push(e),-1==a.indexOf(e)&&a.push(e),-1==_.other_sizes.indexOf(e)&&_.other_sizes.push(e),-1==_.all_sizes.indexOf(e)&&_.all_sizes.push(e)}),j.logl("sz","Unit",_.alias,"allowed sizes",a),T.trigger("unit.allow_sizes",_,a)},this.configure=function(e){for(var t in e)"unique_id"!=t&&"auction"!=t&&("settings"!=t?_.hasOwnProperty(t)&&"function"!=typeof _[t]&&(_[t]=JSON.parse(JSON.stringify(e[t]))):j.each(e[t],function(e,t){_.settings[t]=e}));_.all_sizes=[_.size].concat(_.other_sizes),_.original_sizes=[].concat(_.all_sizes),j.logl("sz","Unit definition original_sizes=",JSON.stringify(_.original_sizes),"size=",JSON.stringify(_.size),"other_sizes=",JSON.stringify(_.other_sizes)),j.qs("adb_force_bidder")&&(_.min_cpm=0),T.trigger("unit.config",_)},this.addBidder=function(e,t){g[e]=t},this.eachBidder=function(e){for(var t in g)g.hasOwnProperty(t)&&u[t]&&e(t,g[t])},this.hasBidReqConf=function(){return 0<l},this.addBidReqConf=function(e,t,i){var n={id:j.genID("BR"),unit:_,adjust:1,bidder_name:e,bidder_id:t.bidder_id,bidder_unit_id:t.bidder_unit_id,min_cpm:_.min_cpm,size:_.size,other_sizes:_.other_sizes,all_sizes:[],responses:[],late_responses:[],test:t.test};if(g[e]){var r;for(r in _.settings)_.settings.hasOwnProperty(r)&&(n[r]=_.settings[r]);for(r in t.settings)t.settings.hasOwnProperty(r)&&(n[r]=t.settings[r]);for(r in g[e].settings)g[e].settings.hasOwnProperty(r)&&(n[r]=g[e].settings[r]);n.params={},j.assign(n.params,t.settings),1!=n.adjust&&(n.min_cpm=Number((n.min_cpm/n.adjust).toFixed(2)));var a=[],o=!1;if("function"==typeof t.mutate&&a.push({n:"BidReq",f:t.mutate}),"function"==typeof g[e].mutate&&a.push({n:"Bidder",f:g[e].mutate}),j.each(a,function(e){e.f(n,i)||(o=!0,j.log(e.n+" mutate rejected BR: ",n))}),!o)if(!n.test||j.qsab(e,n.bidder_id,!0)){if(t.settings.size?n.other_sizes=[]:"string"==typeof n.other_sizes&&(n.other_sizes=n.other_sizes?n.other_sizes.split(","):[]),f){var s=[];0<=f.indexOf(n.size)&&s.push(n.size);for(var d=0;d<n.other_sizes.length;++d){var c=n.other_sizes[d];0<=f.indexOf(c)&&s.push(c)}if(!s.length)return void(f.length&&j.log("Unit ",_.alias," skipped configuration for ",n.bidder_name," because it does not support any of these sizes: ",f));n.size=s[0],n.other_sizes=s.slice(1)}n.all_sizes=[n.size].concat(n.other_sizes),j.logl("sz","Bid request sizes:",n.all_sizes),u[e]||(u[e]=[]),u[e].push(n),w[n.id]=n,++l,T.trigger("unit.config_brc",_,n)}else j.log("Test configuration skipped: ",n)}else j.err("BR missing bidder",e)},this.eachBidReqConf=function(e,t){"function"==typeof e&&(t=e,e=!1),e?j.each(u[e],t):j.each(w,t)},this.getBidReqConf=function(e){return w[e]||!1},this.set=function(e,t){if("object"!=typeof e)n[e]=t;else for(var i in e)e.hasOwnProperty(i)&&_.set(i,e[i])},this.setImpData=function(e,t,i){var n=_.get("adb_imp_data")||{};n[e]=i&&n[e]||t,_.set("adb_imp_data",n)},this.get=function(e){return n[e]},this.halt=function(){A=!0},this.onReady=function(e){t=e,z()};var z=function(){S&&t&&setTimeout(function(){t(_)},0)};this.markEmpty=function(e){_.eachBidReqConf(e,function(e){e.responses.length||_.addEmptyBid(e)})},this.addEmptyBid=function(e){if("number"==typeof e||"string"==typeof e){var t=e;if(!(e=w[t]))return void j.err("Could not find bid req: ",t)}e.responses.length||A&&e.late_responses.length||_.addBid(e,{})};function B(e,t){return e._bid_cpm==t._bid_cpm&&e.width==t.width&&e.height==t.height&&e.creative==t.creative}this.addBid=function(e,t){if(!e||!_.getBidReqConf(e.id))return j.err("Bid request from ",e.bidder_name,"not found on unit",_.id),!1;var i=Number(parseFloat(t.cpm).toFixed(2))||0,n=Number(t.width)||0,r=Number(t.height)||0,a=t.creative||"",o=t.creative_url||"",s=t.extras||{},d=t.force||!1,c=t.render,u=t.vastUrl,l=t.vastXml,g=t.rawbid;i||(t.empty=!0);var f=Number((i*e.adjust).toFixed(2)),p=e.min_cpm;0<p&&f<p&&(f=0);var m=E.libSettings().pubchkcreativefn;a&&"function"==typeof m&&!m(e,t,E.libSettings())&&(j.log("Creative blocked: ",e.bidder_id,n,r,f,s),f=0);var h=j.dts(),v={id:_.id+"."+j.genID("B"),ms:Math.round(h-_.auction.ts),ts:h,config:e,viable:!A,cpm:f,_min_cpm:p,_bid_cpm:i,force:d,width:n,height:r,creative:a,creative_url:o,extras:s,render:c,vastUrl:u,vastXml:l,rawbid:g};if(function(e,t){var i;for(i=0;i<e.responses.length;++i)if(B(t,e.responses[i]))return!0;for(i=0;i<e.late_responses.length;++i)if(B(t,e.late_responses[i]))return!0;return!1}(e,v))return j.log("Unit ",_.alias,"ignored duplicate bid from ",e.bidder_name," on BR ",e.id,": ",v.ms,v.width+"x"+v.height,v.cpm.toFixed(2)),!1;var b=v.viable?"":"late ";if(!v.cpm&&0<v._bid_cpm){var y=1!=e.adjust?" * "+e.adjust+" = "+Number((v._bid_cpm*e.adjust).toFixed(2)):"";b+="below-floor ("+v._bid_cpm+y+" < "+v._min_cpm+") "}else t.empty&&(b+="empty ");return j.log("Unit ",_.alias,"got",b+"bid from ",e.bidder_name," on BR ",e.id,": ",v.ms,v.width+"x"+v.height,v.cpm.toFixed(2)),T.trigger("bid.ready",v),v.viable?(e.responses.push(v),x.push(v),function(){if(!A){for(var e in w){var t=w[e];if(t.responses&&!t.responses.length)return}S=!0,z()}}()):(e.late_responses.push(v),k.lateBid(v)),v},this.getWinner=function(){if(!r){"function"==typeof E.libSettings().filter_bid&&j.wrapAsync(E.libSettings().filter_bid),j.each(x,function(t){T.trigger("bid.auction_close_filter",_,t),t.blocked&&(t.cpm=0,j.log("Bid filtered out",_.alias,t.config.bidder_name,t.blocked));var e=t.width+"x"+t.height;if(t.cpm&&f&&f&&-1==f.indexOf(e))return j.log("Unit ",_.alias,"rejected",t.config.bidder_name,"invalid size",e),void j.err("U",_.id," B",t.config.bidder_id+"."+t.config.bidder_unit_id,e,f);var i=t.cpm&&(!r||t.cpm>r.cpm||t.cpm==r.cpm&&.5<Math.random());if(r&&r.force&&(i=!1),t.force||i){r=t;try{function n(e){"string"==typeof t[e]&&(t[e]=t[e].replace(/\$\{AUCTION_PRICE\}/g,t.cpm))}n("creative"),n("creative_url")}catch(e){j.err("Macro failed: ",e)}}}),r&&(j.log("Unit ",_.alias,"set winner to ",r.config.bidder_name,r.width+"x"+r.height,r.cpm.toFixed(2)),T.trigger("bid.auction_winner",r))}return r},this.init()}},{"./analytics":10,"./config":13,"./modules":15,"./utils":22}],22:[function(e,t,f){var n;f.wrapAsync=function(e,t,i){return function(){try{return e.apply(i||this,arguments)}catch(e){t?t(e):f.err("Caught AsyncErr: ",e)}}},f.thread=function(t){return t=f.wrapAsync(t),function(){var e=arguments;setTimeout(function(){t.apply(this,e)},0)}},f.attempt=function(e,t){try{return e()}catch(e){}return t};function r(e){return{loading:1,interactive:2,complete:3}[e=e||document.readyState]||0}var i=1,a=(new Date).getTime(),o=function(){try{a-=Math.round(performance.now()),o=function(){return r()+"T"+Math.round(performance.now()).toString(36)},n=[i,a.toString(36),o()]}catch(e){o=function(){return r()+"T"+Math.max(0,(new Date).getTime()-a).toString(36)},n=[i=0,a.toString(36),r()+"T0"]}};o();function p(e,t,i){return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i),i}p(document,"readystatechange",function(){var e,t,i;3==r()&&(e=document,t="readystatechange",i=arguments.callee,e.removeEventListener?e.removeEventListener(t,i):e.detachEvent&&e.detachEvent("on"+t,i)),n.push(o())}),f.perfts=function(){return o()},f.pgts=function(){return n},f.dts=function(){return i?Number(performance.now().toFixed(2)):Number(Math.max(0,(new Date).getTime()-a).toFixed(2))};var s=0;f.genID=function(e){return(e||"")+ ++s+Math.random().toString(16).substr(2)},f.vp=function(){var e,t,i,n=document;try{e=window.innerWidth,t=window.innerHeight,i=window.pageYOffset}catch(e){}return{w:e||(n.documentElement&&n.documentElement.clientWidth||n.body&&n.body.clientWidth)||0,h:t||(n.documentElement&&n.documentElement.clientHeight||n.body&&n.body.clientHeight)||0,y:i||n.body&&n.body.scrollTop||0}},f.cr=function(e){var t=String(document.cookie).match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t=t?decodeURIComponent(t[2]):""},f.cw=function(e,t,i){exp_string=0<(i=i||1)?"max-age="+86400*i:"max-age=-99999";var n=e+"="+encodeURIComponent(t)+";"+exp_string+";path=/;domain="+window.location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1");document.cookie=n};try{var d="adbct";f.cw(d,1),f.cookies=!!f.cr(d),f.cw(d,"",-1)}catch(e){}try{f.safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}catch(e){}f.https=!("https:"!=location.protocol),f.genUUID=function(e){try{return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,f.genUUID)}catch(e){return 0}},f.qs=function(e){var t=new RegExp(e+"=([^&]+)");return(String(window.location.search).match(t)||[]).pop()};var c=f.qs("adb_force_bidder"),u=f.qs("adb_allow_bidder"),l=[];c&&"*"!=c&&(l=l.concat(c.split(","))),u&&"*"!=u&&(l=l.concat(u.split(","))),f.qsab=function(e,t,i){return t=String(t),"*"==u||"*"==c||(i?0<=l.indexOf(t)||0<=l.indexOf(e):!c||(0<=l.indexOf(t)||0<=l.indexOf(e)))},f.qsappend=function(e,t,i,n){return n&&!t?"":(i&&(t=encodeURIComponent(t)),"&"+e+"="+t)},f.toqs=function(e,i){var n="";return f.each(e,function(e,t){f.isarr(e)?f.each(e,function(e){n+=f.qsappend(t+"[]",e,i)}):n+=f.qsappend(t,e,i)}),n.replace(/^\&/,"")},f.each=function(e,t){if(e&&0!==e.length)if(e.length)for(var i=0;i<e.length;++i)t(e[i],i);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},f.resize_element=function(e,t,i){e.style.width&&String(e.style.width).replace("px","")!=t&&(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")!=i&&(e.style.height=i+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=i&&e.setAttribute("height",i)},f.resize_iframe=function(e,t,i,n){try{for(var r=e.document.getElementsByTagName("iframe")||[],a=0;a<r.length;++a)try{if(r[a].contentDocument===t)return f.resize_element(r[a],i,n),void(e!==top&&f.resize_iframe(e.parent,e.document,i,n))}catch(e){}}catch(e){f.err("Error resizing window to "+i+"x"+n,e)}f.err("Failed to resize window to "+i+"x"+n)},f.url=function(){var t,i,n,r,a,e=top,o=window,s=document,d=!1;try{d=window.parent===window}catch(e){}try{t=e.location.host,i=e.location.pathname+e.location.search+e.location.hash,href=e.location.href,n=e.document.referrer,r=e.document.title,a=e.location.protocol}catch(e){try{t=(String(s.referrer).match(/^[^\/]+\/\/([^\/]+)/)||[]).pop(),i=(String(s.referrer).match(/^[^\/]+\/\/[^\/]+(\/.+)$/)||[]).pop(),a=(String(s.referrer).match(/^https?\:/)||[]).pop(),href=s.referrer,r=n=""}catch(e){}}return t&&i||(t=o.location.host,i=o.location.pathname+o.location.search+o.location.hash,a=o.location.protocol,href=o.location.href,n=s.referrer),{domain:t,page:i,href:href,referrer:n,title:r,is_top:d,protocol:a}},f.pixel=function(e){document.createElement("img").src=e+"&rnd="+Math.random()},f.pixelh=function(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(e)+'"></div>':""},f.pixelf=function(e,t,i){return e?(t&&(e=encodeURI(e)),"<iframe "+(i=i?'sandbox="'+i+'"':"")+' id="'+f.genID("IPF")+'" src="'+e+'" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0p;width:0p;display:none;" scrolling="no"></iframe>'):""};var g,m=[],h={};f.uspf=f.wrapAsync(function(e,t){f.logl("px","UserSync qF",e,h[e],5,t),h[e]=(h[e]||0)+1,5<h[e]||m.push({a:e,t:"f",u:t})}),f.uspi=f.wrapAsync(function(e,t){f.logl("px","UserSync qI",e,h[e],5,t),h[e]=(h[e]||0)+1,5<h[e]||m.push({a:e,t:"i",u:t})});var v=!0,b=!0,y=500;f.cfusp=function(e,t,i){e||(v=!1),t||(b=!1),i&&(y=i),f.log("UserSync set: ",{image:v,iframe:b,delay:y})};var _=f.wrapAsync(function(){if(clearTimeout(g),m.length){var e=Math.floor(Math.random()*m.length),t=m[e];if(m.splice(e,1),b&&"f"==t.t){var i=document.createElement("div");i.innerHTML=f.pixelf(t.u,!1,"allow-scripts allow-same-origin"),document.body.appendChild(i.firstChild),f.log("UserSync (F): ",t.a,t.u)}else{if(!v||"i"!=t.t)return f.log("UserSync not sent (!): ",t),_();document.createElement("img").src=t.u,f.log("UserSync (I): ",t.a,t.u)}g=setTimeout(_,50)}});f.qdusp=function(){f.logl("px","UserSync Q",m,y,v,b,f.safari,f.cookies),!f.safari&&f.cookies&&(clearTimeout(g),g=setTimeout(_,y))};var w={};f.load=function(e,t,i,n){if(t=t?f.wrapAsync(t):function(){},i&&w[e])w[e].ready?t():w[e].cbs.push(t);else{i&&(w[e]||(w[e]={ready:!1,cbs:[t]}),t=function(){w[e].ready=!0,f.each(w[e].cbs,function(e){e()})});var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:r.onload=t,r.src=e;var a=n||(document.body||document.head);a.appendChild(r,a.firstChild)}},f.loadCached=function(e,t){f.load(e,t,!0)},f.iiframe=function(e){var t=document.createElement("iframe");return t.id=f.genID("IIF"),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t.src=void 0===e?"about:blank":e,t.style.display="none",t},f.prepend=function(e,t){return"string"==typeof t&&(t=document.createElement(t)),e.children.length?e.insertBefore(t,e.children[0]):e.appendChild(t),t};var x=!(f.isarr=function(e){return"[object Array]"===Object.prototype.toString.call(e)});f.isdebug=function(){return x},f.setdebug=function(e){e&&(x=e,document.cookie="adb_debug="+x+";path=/;domain=."+location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1"))},f.setdebug(f.qs("adb_debug")||f.cr("adb_debug")),f.log=function(){if(x){var e=Array.prototype.slice.apply(arguments);e.unshift("AdBridg | "+f.dts().toFixed(2));try{console.log.apply(console,e)}catch(e){}}},f.logl=function(e){x==e&&f.log.apply(f,["log::",e].concat(Array.prototype.slice.apply(arguments,[1])))};var A=[];f.err=function(){var t=Array.prototype.slice.apply(arguments);if(x){var e=[].concat(t);e.unshift("AdBridg | "+f.dts().toFixed(2)+" | ERROR: ");try{console.log.apply(console,e)}catch(e){}}A.length&&f.each(A,function(e){e.apply(null,t)})};var S=!(f.onerr=function(e){A.push(e)}),z=[];f.onrec=function(e){for(S=e;z.length;)S(z.shift())},f.rec=function(e){S?S(e):z.push(e)},f.dom=f.wrapAsync(function(e,t,i,n,r,a){B.add(e,t,i,n,r,a)}),f.undom=f.wrapAsync(function(e,t){B.remove(e,t)}),f.lzrescan=f.wrapAsync(function(){B.rescan()});var B=new function(){var i,s={},d=0,c=[],n=!1,r=!1,u=!1;this.add=function(e,t,i,n,r,a){s[e]=s[e]||[],s[e].push({c:n,d:t,t:i,i:e,f:r,x:a}),d+=1,g()},this.remove=function(e,t){var i,n=s[e]||[];if(t)for(i=n.length-1;0<=i;--i)n[i].c===t&&s[e].splice(i,1);for(t&&n.length||delete s[e],i=c.length-1;0<=i;--i)t&&c[i].c!==t||c.splice(i,1)},this.rescan=function(){f.logl("lz","Lazy explicit rescan"),i=setTimeout(g,0)},p(window,"scroll",function(){u=!0,!i&&d&&(f.logl("lz","Lazy scroll wait",100),i=setTimeout(g,100))});function l(e,t){if(e.f&&!e.f(e,t,u))return f.logl("lz","Lazy blocked",e,u),!1;if(!t.v){if(!e.x)return f.logl("lz","Lazy cannot measure el",e,t),!1;var i=document.getElementById(e.i);if(!i)return f.logl("lz","Lazy collapse check - cannot read el",e,t),!1;var n=(i||{}).parentNode;if(!n)return f.logl("lz","Lazy collapse check - cannot read parent",e,t),!1;var r=f.where(n);if(!r.v)return f.logl("lz","Lazy collapse check - parent invis",e,t,r),!1;var a=document.createElement("span");a.style="position:absolute;display:block;width:1px;height:1px;",n.insertBefore(a,i);var o=f.where(a);n.removeChild(a),f.logl("lz","Lazy collapse check - using replacement coords",JSON.stringify({coords:t,replacement:o})),t=o}return 0<e.d&&e.d<1?t.v>e.d:t.d<=e.d}var g=f.thread(function(){var e=f.dts();if(clearTimeout(i),i=!1,n||e-r<50)i=setTimeout(g,50);else{var o;n=!0,r=e,f.logl("lz","Lazy measure",e),o=[],f.each(s,function(e,t){var i=f.where(t);if(!i)return f.logl("lz","Lazy no dom",t);for(var n=e.length-1;0<=n;--n){var r=e[n],a=l(r,i);f.logl("lz","Lazy check",JSON.stringify({el:t,coords:i,reqdist:r.d,criteria:a,seenscr:u})),a&&(--d,e.splice(n,1),c.push(r),f.logl("lz","Lazy to duration",t))}e.length||o.push(t)}),f.each(o,function(e){delete s[e]});var t=function(e){for(var t=!1,i=c.length-1;0<=i;--i){var n=c[i],r=n.i;if(f.logl("lz","Lazy check time",n,r," has scroll event: ",u),n.tx){if(!l(n,f.where(r))){f.logl("lz","Lazy back to distance",r),n.tx=0,c.splice(i,1),s[r]=s[r]||[],s[r].push(n),d+=1;continue}}else n.tx=e+n.t;var a=n.tx-e;a<=0?(f.logl("lz","Lazy execute",r),c.splice(i,1),f.thread(n.c)()):t=t?Math.min(1+a,t):1+a}return t}(e)||100;c.length&&(f.logl("lz","Lazy duration wait",t),i=setTimeout(g,t)),n=!1}})};f.where=function(e){if("string"==typeof e&&(e=document.getElementById(e)),!e)return!1;var t=e.getBoundingClientRect(),i=f.vp(),n=t.top,r=t.height,a=t.top+r,o="in_viewport",s=0,d=1,c=j(e);return c&&(d=0,o="unknown"),n<0?(s=a<0?Math.abs(a):0,o=((d=0<a?a/r:0)?"partially_":"")+"above_viewport"):a>i.h&&(s=n>i.h?n-i.h:0,o=((d=n<i.h?(i.h-n)/r:0)?"partially_":"")+"below_viewport"),{i:c,p:o,d:s,v:d,c:{vp:i,t:n,h:r,b:a}}},f.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var j=function(e){try{if(!e)return"no_dom_el";var t=window.getComputedStyle&&window.getComputedStyle(e)||{};if("none"==t.display)return"display_none";if("hidden"==t.visibility)return"vis_hidden"}catch(e){f.err("get_invis_fail")}return!1};f.dom_invisible=f.wrapAsync(function(e){var t=document.getElementById(e),i=j(t);if(i)return"el_"+i;for(var n=0;t.parentNode&&(t=t.parentNode)!==document.body;)if(n+=1,i=j(t))return"anc_"+n+"_"+i;return!1})},{}]},{},[14]);